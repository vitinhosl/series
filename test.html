<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Séries</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/dSX7Wic.png">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</head>
<body>
    <div id="main" class="show">
        <header>
            <div id="title">
                <svg width="50" height="50" viewBox="0 0 297 297" id="logo" class="show">
                    <defs>
                        <style>
                            :root {
                                --primary-circle: #c00c42;      /* Círculo principal */
                                --shadow-circle: #69132f;       /* Sombra do círculo */
                                --rewind-lines: #39424e;        /* Linhas das Antenas */
                                --player-bg-left: #12161d;      /* Fundo do player (esquerda e direita) */
                                --player-bg-right: #12161d;     /* Mesmo tom para consistência */
                                --buttons: #2d343f;             /* Botões circulares */
                                --screen-left: #444d5b;         /* Tela esquerda */
                                --screen-right: #2d343f;        /* Tela direita */
                            }
                        </style>
                    </defs>
                    <g>
                        <circle cx="148.5" cy="148.5" r="148.5" fill="var(--primary-circle)" opacity="1"></circle>
                        <path d="M297 148.5c0-2.326-.061-4.638-.167-6.938l-53.499-53.9L53.299 224.778l69.91 70.067a149.386 149.386 0 0 0 25.291 2.154C230.514 297 297 230.514 297 148.5z" fill="var(--shadow-circle)" opacity="1"></path>
                        <path d="M142.273 92.027a5.5 5.5 0 0 1-7.66-1.351l-25.237-36.043a5.5 5.5 0 1 1 9.011-6.309l25.237 36.043a5.5 5.5 0 0 1-1.351 7.66z" fill="var(--rewind-lines)" opacity="1"></path>
                        <path d="M147.607 92.027a5.5 5.5 0 0 0 7.66-1.351l25.237-36.043a5.5 5.5 0 0 0-9.011-6.309l-25.237 36.043a5.502 5.502 0 0 0 1.351 7.66z" fill="var(--rewind-lines)" opacity="1"></path>
                        <path d="M66.131 230.318h164.738c9.737 0 17.631-7.894 17.631-17.631V100.131c0-9.737-7.894-17.631-17.631-17.631H66.131c-9.737 0-17.631 7.894-17.631 17.631v112.556c0 9.737 7.894 17.631 17.631 17.631z" fill="var(--player-bg-left)" opacity="1"></path>
                        <path d="M230.869 82.5h-85.702v147.818h85.702c9.737 0 17.631-7.894 17.631-17.631V100.131c0-9.737-7.894-17.631-17.631-17.631z" fill="var(--player-bg-right)" opacity="1"></path>
                        <circle cx="222.5" cy="119.5" r="13.5" fill="var(--buttons)" opacity="1"></circle>
                        <circle cx="222.5" cy="162" r="13.5" fill="var(--buttons)" opacity="1"></circle>
                        <path d="M81.417 214.5h101.166c8.514 0 15.417-6.902 15.417-15.417v-85.348c0-8.514-6.902-15.417-15.417-15.417H81.417C72.903 98.318 66 105.22 66 113.735v85.348c0 8.515 6.902 15.417 15.417 15.417z" fill="var(--screen-left)" opacity="1"></path>
                        <path d="M182.583 98.318h-37.416V214.5h37.416c8.514 0 15.417-6.902 15.417-15.417v-85.348c0-8.515-6.902-15.417-15.417-15.417z" fill="var(--screen-right)" opacity="1"></path>
                    </g>
                </svg>
                <button id="back-button" class="hidden">❮</button>
                <h1 id="series-title" class="show">Séries</h1>
                <h1 id="series-name" class="hidden"></h1>
            </div>
        </header>

        <div id="home" class="show">
            <div id="myCarousel" class="carousel slide myCarousel" data-interval="false" data-ride="carousel">
                <ol class="carousel-indicators" id="carousel-indicators"></ol>
                <div class="carousel-inner" id="carousel-inner"></div>
                
                <hr class="transition-timer-carousel-progress-bar" />

                <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Anterior</span>
                </a>
                
                <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Próximo</span>
                </a>
            </div>

            <div id="group-search">
                <div id="keys">
                    <button>TODAS</button> 
                    <button>☆</button> 
                    <button>A</button> 
                    <button>B</button> 
                    <button>C</button> 
                    <button>D</button> 
                    <button>E</button> 
                    <button>F</button> 
                    <button>G</button> 
                    <button>H</button> 
                    <button>I</button> 
                    <button>J</button> 
                    <button>K</button> 
                    <button>L</button> 
                    <button>M</button> 
                    <button>N</button> 
                    <button>O</button> 
                    <button>P</button> 
                    <button>Q</button> 
                    <button>R</button> 
                    <button>S</button> 
                    <button>T</button> 
                    <button>U</button> 
                    <button>V</button> 
                    <button>W</button> 
                    <button>X</button> 
                    <button>Y</button> 
                    <button>Z</button> 
                </div>
                <div id="search">
                    <div class="container-input">
                        <input type="text" placeholder="Procurar" name="text" class="input" autocomplete="off">
                        <svg fill="#000000" width="20px" height="20px" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg">
                            <path d="M790.588 1468.235c-373.722 0-677.647-303.924-677.647-677.647 0-373.722 303.925-677.647 677.647-677.647 373.723 0 677.647 303.925 677.647 677.647 0 373.723-303.924 677.647-677.647 677.647Zm596.781-160.715c120.396-138.692 193.807-319.285 193.807-516.932C1581.176 354.748 1226.428 0 790.588 0S0 354.748 0 790.588s354.748 790.588 790.588 790.588c197.647 0 378.24-73.411 516.932-193.807l516.028 516.142 79.963-79.963-516.142-516.028Z" fill-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>
            <div id="group-continues"></div>
            <div id="group-favorites"></div>
            <div id="group-home"></div>
        </div>

        <div id="series" class="hidden"></div>

        <div id="video-overlay" class="hidden">
            <div id="video-container">
                <div id="video-overlay-header">
                    <div id="toggle-buttons-container"></div>
                    <div id="video-overlay-dropdown"></div>
                </div>
                <button id="close-overlay-button"><span>✕</span></button>
                <iframe id="video-iframe" src="" frameborder="0" allowfullscreen allow="autoplay"></iframe>
                <button id="prev-video-button">
                    ❮
                    <span class="tooltip-text tooltip-top">Anterior</span>
                </button>
                <button id="next-video-button">
                    ❯
                    <span class="tooltip-text tooltip-top">Próximo</span>
                </button>
            </div>
        </div>
    </div>

    <style>

.glyphicon{
    position:relative;
    top:1px;
    display:inline-block;
    font-family:'Glyphicons Halflings';
    font-style:normal;
    font-weight:400;
    line-height:1;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale
}
.glyphicon-asterisk:before{
    content:"\002a"
}
.glyphicon-plus:before{
    content:"\002b"
}
.glyphicon-eur:before,.glyphicon-euro:before{
    content:"\20ac"
}
.glyphicon-minus:before{
    content:"\2212"
}
.glyphicon-cloud:before{
    content:"\2601"
}
.glyphicon-envelope:before{
    content:"\2709"
}
.glyphicon-pencil:before{
    content:"\270f"
}
.glyphicon-glass:before{
    content:"\e001"
}
.glyphicon-music:before{
    content:"\e002"
}
.glyphicon-search:before{
    content:"\e003"
}
.glyphicon-heart:before{
    content:"\e005"
}
.glyphicon-star:before{
    content:"\e006"
}
.glyphicon-star-empty:before{
    content:"\e007"
}
.glyphicon-user:before{
    content:"\e008"
}
.glyphicon-film:before{
    content:"\e009"
}
.glyphicon-th-large:before{
    content:"\e010"
}
.glyphicon-th:before{
    content:"\e011"
}
.glyphicon-th-list:before{
    content:"\e012"
}
.glyphicon-ok:before{
    content:"\e013"
}
.glyphicon-remove:before{
    content:"\e014"
}
.glyphicon-zoom-in:before{
    content:"\e015"
}
.glyphicon-zoom-out:before{
    content:"\e016"
}
.glyphicon-off:before{
    content:"\e017"
}
.glyphicon-signal:before{
    content:"\e018"
}
.glyphicon-cog:before{
    content:"\e019"
}
.glyphicon-trash:before{
    content:"\e020"
}
.glyphicon-home:before{
    content:"\e021"
}
.glyphicon-file:before{
    content:"\e022"
}
.glyphicon-time:before{
    content:"\e023"
}
.glyphicon-road:before{
    content:"\e024"
}
.glyphicon-download-alt:before{
    content:"\e025"
}
.glyphicon-download:before{
    content:"\e026"
}
.glyphicon-upload:before{
    content:"\e027"
}
.glyphicon-inbox:before{
    content:"\e028"
}
.glyphicon-play-circle:before{
    content:"\e029"
}
.glyphicon-repeat:before{
    content:"\e030"
}
.glyphicon-refresh:before{
    content:"\e031"
}
.glyphicon-list-alt:before{
    content:"\e032"
}
.glyphicon-lock:before{
    content:"\e033"
}
.glyphicon-flag:before{
    content:"\e034"
}
.glyphicon-headphones:before{
    content:"\e035"
}
.glyphicon-volume-off:before{
    content:"\e036"
}
.glyphicon-volume-down:before{
    content:"\e037"
}
.glyphicon-volume-up:before{
    content:"\e038"
}
.glyphicon-qrcode:before{
    content:"\e039"
}
.glyphicon-barcode:before{
    content:"\e040"
}
.glyphicon-tag:before{
    content:"\e041"
}
.glyphicon-tags:before{
    content:"\e042"
}
.glyphicon-book:before{
    content:"\e043"
}
.glyphicon-bookmark:before{
    content:"\e044"
}
.glyphicon-print:before{
    content:"\e045"
}
.glyphicon-camera:before{
    content:"\e046"
}
.glyphicon-font:before{
    content:"\e047"
}
.glyphicon-bold:before{
    content:"\e048"
}
.glyphicon-italic:before{
    content:"\e049"
}
.glyphicon-text-height:before{
    content:"\e050"
}
.glyphicon-text-width:before{
    content:"\e051"
}
.glyphicon-align-left:before{
    content:"\e052"
}
.glyphicon-align-center:before{
    content:"\e053"
}
.glyphicon-align-right:before{
    content:"\e054"
}
.glyphicon-align-justify:before{
    content:"\e055"
}
.glyphicon-list:before{
    content:"\e056"
}
.glyphicon-indent-left:before{
    content:"\e057"
}
.glyphicon-indent-right:before{
    content:"\e058"
}
.glyphicon-facetime-video:before{
    content:"\e059"
}
.glyphicon-picture:before{
    content:"\e060"
}
.glyphicon-map-marker:before{
    content:"\e062"
}
.glyphicon-adjust:before{
    content:"\e063"
}
.glyphicon-tint:before{
    content:"\e064"
}
.glyphicon-edit:before{
    content:"\e065"
}
.glyphicon-share:before{
    content:"\e066"
}
.glyphicon-check:before{
    content:"\e067"
}
.glyphicon-move:before{
    content:"\e068"
}
.glyphicon-step-backward:before{
    content:"\e069"
}
.glyphicon-fast-backward:before{
    content:"\e070"
}
.glyphicon-backward:before{
    content:"\e071"
}
.glyphicon-play:before{
    content:"\e072"
}
.glyphicon-pause:before{
    content:"\e073"
}
.glyphicon-stop:before{
    content:"\e074"
}
.glyphicon-forward:before{
    content:"\e075"
}
.glyphicon-fast-forward:before{
    content:"\e076"
}
.glyphicon-step-forward:before{
    content:"\e077"
}
.glyphicon-eject:before{
    content:"\e078"
}
.glyphicon-chevron-left:before{
    content:"\e079"
}
.glyphicon-chevron-right:before{
    content:"\e080"
}
.glyphicon-plus-sign:before{
    content:"\e081"
}
.glyphicon-minus-sign:before{
    content:"\e082"
}
.glyphicon-remove-sign:before{
    content:"\e083"
}
.glyphicon-ok-sign:before{
    content:"\e084"
}
.glyphicon-question-sign:before{
    content:"\e085"
}
.glyphicon-info-sign:before{
    content:"\e086"
}
.glyphicon-screenshot:before{
    content:"\e087"
}
.glyphicon-remove-circle:before{
    content:"\e088"
}
.glyphicon-ok-circle:before{
    content:"\e089"
}
.glyphicon-ban-circle:before{
    content:"\e090"
}
.glyphicon-arrow-left:before{
    content:"\e091"
}
.glyphicon-arrow-right:before{
    content:"\e092"
}
.glyphicon-arrow-up:before{
    content:"\e093"
}
.glyphicon-arrow-down:before{
    content:"\e094"
}
.glyphicon-share-alt:before{
    content:"\e095"
}
.glyphicon-resize-full:before{
    content:"\e096"
}
.glyphicon-resize-small:before{
    content:"\e097"
}
.glyphicon-exclamation-sign:before{
    content:"\e101"
}
.glyphicon-gift:before{
    content:"\e102"
}
.glyphicon-leaf:before{
    content:"\e103"
}
.glyphicon-fire:before{
    content:"\e104"
}
.glyphicon-eye-open:before{
    content:"\e105"
}
.glyphicon-eye-close:before{
    content:"\e106"
}
.glyphicon-warning-sign:before{
    content:"\e107"
}
.glyphicon-plane:before{
    content:"\e108"
}
.glyphicon-calendar:before{
    content:"\e109"
}
.glyphicon-random:before{
    content:"\e110"
}
.glyphicon-comment:before{
    content:"\e111"
}
.glyphicon-magnet:before{
    content:"\e112"
}
.glyphicon-chevron-up:before{
    content:"\e113"
}
.glyphicon-chevron-down:before{
    content:"\e114"
}
.glyphicon-retweet:before{
    content:"\e115"
}
.glyphicon-shopping-cart:before{
    content:"\e116"
}
.glyphicon-folder-close:before{
    content:"\e117"
}
.glyphicon-folder-open:before{
    content:"\e118"
}
.glyphicon-resize-vertical:before{
    content:"\e119"
}
.glyphicon-resize-horizontal:before{
    content:"\e120"
}
.glyphicon-hdd:before{
    content:"\e121"
}
.glyphicon-bullhorn:before{
    content:"\e122"
}
.glyphicon-bell:before{
    content:"\e123"
}
.glyphicon-certificate:before{
    content:"\e124"
}
.glyphicon-thumbs-up:before{
    content:"\e125"
}
.glyphicon-thumbs-down:before{
    content:"\e126"
}
.glyphicon-hand-right:before{
    content:"\e127"
}
.glyphicon-hand-left:before{
    content:"\e128"
}
.glyphicon-hand-up:before{
    content:"\e129"
}
.glyphicon-hand-down:before{
    content:"\e130"
}
.glyphicon-circle-arrow-right:before{
    content:"\e131"
}
.glyphicon-circle-arrow-left:before{
    content:"\e132"
}
.glyphicon-circle-arrow-up:before{
    content:"\e133"
}
.glyphicon-circle-arrow-down:before{
    content:"\e134"
}
.glyphicon-globe:before{
    content:"\e135"
}
.glyphicon-wrench:before{
    content:"\e136"
}
.glyphicon-tasks:before{
    content:"\e137"
}
.glyphicon-filter:before{
    content:"\e138"
}
.glyphicon-briefcase:before{
    content:"\e139"
}
.glyphicon-fullscreen:before{
    content:"\e140"
}
.glyphicon-dashboard:before{
    content:"\e141"
}
.glyphicon-paperclip:before{
    content:"\e142"
}
.glyphicon-heart-empty:before{
    content:"\e143"
}
.glyphicon-link:before{
    content:"\e144"
}
.glyphicon-phone:before{
    content:"\e145"
}
.glyphicon-pushpin:before{
    content:"\e146"
}
.glyphicon-usd:before{
    content:"\e148"
}
.glyphicon-gbp:before{
    content:"\e149"
}
.glyphicon-sort:before{
    content:"\e150"
}
.glyphicon-sort-by-alphabet:before{
    content:"\e151"
}
.glyphicon-sort-by-alphabet-alt:before{
    content:"\e152"
}
.glyphicon-sort-by-order:before{
    content:"\e153"
}
.glyphicon-sort-by-order-alt:before{
    content:"\e154"
}
.glyphicon-sort-by-attributes:before{
    content:"\e155"
}
.glyphicon-sort-by-attributes-alt:before{
    content:"\e156"
}
.glyphicon-unchecked:before{
    content:"\e157"
}
.glyphicon-expand:before{
    content:"\e158"
}
.glyphicon-collapse-down:before{
    content:"\e159"
}
.glyphicon-collapse-up:before{
    content:"\e160"
}
.glyphicon-log-in:before{
    content:"\e161"
}
.glyphicon-flash:before{
    content:"\e162"
}
.glyphicon-log-out:before{
    content:"\e163"
}
.glyphicon-new-window:before{
    content:"\e164"
}
.glyphicon-record:before{
    content:"\e165"
}
.glyphicon-save:before{
    content:"\e166"
}
.glyphicon-open:before{
    content:"\e167"
}
.glyphicon-saved:before{
    content:"\e168"
}
.glyphicon-import:before{
    content:"\e169"
}
.glyphicon-export:before{
    content:"\e170"
}
.glyphicon-send:before{
    content:"\e171"
}
.glyphicon-floppy-disk:before{
    content:"\e172"
}
.glyphicon-floppy-saved:before{
    content:"\e173"
}
.glyphicon-floppy-remove:before{
    content:"\e174"
}
.glyphicon-floppy-save:before{
    content:"\e175"
}
.glyphicon-floppy-open:before{
    content:"\e176"
}
.glyphicon-credit-card:before{
    content:"\e177"
}
.glyphicon-transfer:before{
    content:"\e178"
}
.glyphicon-cutlery:before{
    content:"\e179"
}
.glyphicon-header:before{
    content:"\e180"
}
.glyphicon-compressed:before{
    content:"\e181"
}
.glyphicon-earphone:before{
    content:"\e182"
}
.glyphicon-phone-alt:before{
    content:"\e183"
}
.glyphicon-tower:before{
    content:"\e184"
}
.glyphicon-stats:before{
    content:"\e185"
}
.glyphicon-sd-video:before{
    content:"\e186"
}
.glyphicon-hd-video:before{
    content:"\e187"
}
.glyphicon-subtitles:before{
    content:"\e188"
}
.glyphicon-sound-stereo:before{
    content:"\e189"
}
.glyphicon-sound-dolby:before{
    content:"\e190"
}
.glyphicon-sound-5-1:before{
    content:"\e191"
}
.glyphicon-sound-6-1:before{
    content:"\e192"
}
.glyphicon-sound-7-1:before{
    content:"\e193"
}
.glyphicon-copyright-mark:before{
    content:"\e194"
}
.glyphicon-registration-mark:before{
    content:"\e195"
}
.glyphicon-cloud-download:before{
    content:"\e197"
}
.glyphicon-cloud-upload:before{
    content:"\e198"
}
.glyphicon-tree-conifer:before{
    content:"\e199"
}
.glyphicon-tree-deciduous:before{
    content:"\e200"
}
.glyphicon-cd:before{
    content:"\e201"
}
.glyphicon-save-file:before{
    content:"\e202"
}
.glyphicon-open-file:before{
    content:"\e203"
}
.glyphicon-level-up:before{
    content:"\e204"
}
.glyphicon-copy:before{
    content:"\e205"
}
.glyphicon-paste:before{
    content:"\e206"
}
.glyphicon-alert:before{
    content:"\e209"
}
.glyphicon-equalizer:before{
    content:"\e210"
}
.glyphicon-king:before{
    content:"\e211"
}
.glyphicon-queen:before{
    content:"\e212"
}
.glyphicon-pawn:before{
    content:"\e213"
}
.glyphicon-bishop:before{
    content:"\e214"
}
.glyphicon-knight:before{
    content:"\e215"
}
.glyphicon-baby-formula:before{
    content:"\e216"
}
.glyphicon-tent:before{
    content:"\26fa"
}
.glyphicon-blackboard:before{
    content:"\e218"
}
.glyphicon-bed:before{
    content:"\e219"
}
.glyphicon-apple:before{
    content:"\f8ff"
}
.glyphicon-erase:before{
    content:"\e221"
}
.glyphicon-hourglass:before{
    content:"\231b"
}
.glyphicon-lamp:before{
    content:"\e223"
}
.glyphicon-duplicate:before{
    content:"\e224"
}
.glyphicon-piggy-bank:before{
    content:"\e225"
}
.glyphicon-scissors:before{
    content:"\e226"
}
.glyphicon-bitcoin:before{
    content:"\e227"
}
.glyphicon-btc:before{
    content:"\e227"
}
.glyphicon-xbt:before{
    content:"\e227"
}
.glyphicon-yen:before{
    content:"\00a5"
}
.glyphicon-jpy:before{
    content:"\00a5"
}
.glyphicon-ruble:before{
    content:"\20bd"
}
.glyphicon-rub:before{
    content:"\20bd"
}
.glyphicon-scale:before{
    content:"\e230"
}
.glyphicon-ice-lolly:before{
    content:"\e231"
}
.glyphicon-ice-lolly-tasted:before{
    content:"\e232"
}
.glyphicon-education:before{
    content:"\e233"
}
.glyphicon-option-horizontal:before{
    content:"\e234"
}
.glyphicon-option-vertical:before{
    content:"\e235"
}
.glyphicon-menu-hamburger:before{
    content:"\e236"
}
.glyphicon-modal-window:before{
    content:"\e237"
}
.glyphicon-oil:before{
    content:"\e238"
}
.glyphicon-grain:before{
    content:"\e239"
}
.glyphicon-sunglasses:before{
    content:"\e240"
}
.glyphicon-text-size:before{
    content:"\e241"
}
.glyphicon-text-color:before{
    content:"\e242"
}
.glyphicon-text-background:before{
    content:"\e243"
}
.glyphicon-object-align-top:before{
    content:"\e244"
}
.glyphicon-object-align-bottom:before{
    content:"\e245"
}
.glyphicon-object-align-horizontal:before{
    content:"\e246"
}
.glyphicon-object-align-left:before{
    content:"\e247"
}
.glyphicon-object-align-vertical:before{
    content:"\e248"
}
.glyphicon-object-align-right:before{
    content:"\e249"
}
.glyphicon-triangle-right:before{
    content:"\e250"
}
.glyphicon-triangle-left:before{
    content:"\e251"
}
.glyphicon-triangle-bottom:before{
    content:"\e252"
}
.glyphicon-triangle-top:before{
    content:"\e253"
}
.glyphicon-console:before{
    content:"\e254"
}
.glyphicon-superscript:before{
    content:"\e255"
}
.glyphicon-subscript:before{
    content:"\e256"
}
.glyphicon-menu-left:before{
    content:"\e257"
}
.glyphicon-menu-right:before{
    content:"\e258"
}
.glyphicon-menu-down:before{
    content:"\e259"
}
.glyphicon-menu-up:before{
    content:"\e260"
}

.sr-only{
    position:absolute;
    width:1px;
    height:1px;
    padding:0;
    margin:-1px;
    overflow:hidden;
    clip:rect(0,0,0,0);
    border:0
}
.sr-only-focusable:active,.sr-only-focusable:focus{
    position:static;
    width:auto;
    height:auto;
    margin:0;
    overflow:visible;
    clip:auto
}

.carousel{
    position:relative
}
.carousel-inner{
    position:relative;
    width:100%;
    overflow:hidden
}
.carousel-inner>.item{
    position:relative;
    display:none;
    -webkit-transition:.6s ease-in-out left;
    -o-transition:.6s ease-in-out left;
    transition:.6s ease-in-out left
}
.carousel-inner>.item>a>img,.carousel-inner>.item>img{
    line-height:1
}
@media all and (transform-3d),(-webkit-transform-3d){
    .carousel-inner>.item{
        -webkit-transition:-webkit-transform .6s ease-in-out;
        -o-transition:-o-transform .6s ease-in-out;
        transition:transform .6s ease-in-out;
        -webkit-backface-visibility:hidden;
        backface-visibility:hidden;
        -webkit-perspective:1000px;
        perspective:1000px
    }
    .carousel-inner>.item.active.right,.carousel-inner>.item.next{
        left:0;
        -webkit-transform:translate3d(100%,0,0);
        transform:translate3d(100%,0,0)
    }
    .carousel-inner>.item.active.left,.carousel-inner>.item.prev{
        left:0;
        -webkit-transform:translate3d(-100%,0,0);
        transform:translate3d(-100%,0,0)
    }
    .carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{
        left:0;
        -webkit-transform:translate3d(0,0,0);
        transform:translate3d(0,0,0)
    }
}
.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{
    display:block
}
.carousel-inner>.active{
    left:0
}
.carousel-inner>.next,.carousel-inner>.prev{
    position:absolute;
    top:0;
    width:100%
}
.carousel-inner>.next{
    left:100%
}
.carousel-inner>.prev{
    left:-100%
}
.carousel-inner>.next.left,.carousel-inner>.prev.right{
    left:0
}
.carousel-inner>.active.left{
    left:-100%
}
.carousel-inner>.active.right{
    left:100%
}
.carousel-control{
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    width:15%;
    font-size:20px;
    color:#fff;
    text-align:center;
    text-shadow:0 1px 2px rgba(0,0,0,.6);
    background-color:rgba(0,0,0,0);
    filter:alpha(opacity=50);
    opacity:.5
}
.carousel-control.left{
    background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
    background-image:-o-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
    background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,.0001)));
    background-image:linear-gradient(to right,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1);
    background-repeat:repeat-x
}
.carousel-control.right{
    right:0;
    left:auto;
    background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
    background-image:-o-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
    background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.0001)),to(rgba(0,0,0,.5)));
    background-image:linear-gradient(to right,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1);
    background-repeat:repeat-x
}
.carousel-control:focus,.carousel-control:hover{
    color:#fff;
    text-decoration:none;
    filter:alpha(opacity=90);
    outline:0;
    opacity:.9
}
.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{
    position:absolute;
    top:50%;
    z-index:5;
    display:inline-block;
    margin-top:-10px
}
.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{
    left:50%;
    margin-left:-10px
}
.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{
    right:50%;
    margin-right:-10px
}
.carousel-control .icon-next,.carousel-control .icon-prev{
    width:20px;
    height:20px;
    font-family:serif;
    line-height:1
}
.carousel-control .icon-prev:before{
    content:'\2039'
}
.carousel-control .icon-next:before{
    content:'\203a'
}
.carousel-indicators{
    position:absolute;
    bottom:10px;
    left:50%;
    z-index:15;
    width:60%;
    padding-left:0;
    margin-left:-30%;
    text-align:center;
    list-style:none
}
.carousel-indicators li{
    display:inline-block;
    width:10px;
    height:10px;
    margin:1px;
    text-indent:-999px;
    cursor:pointer;
    /* background-color:#000\9; */
    background-color:rgba(0,0,0,0);
    border:1px solid #fff;
    border-radius:10px
}
.carousel-indicators .active{
    width:12px;
    height:12px;
    margin:0;
    background-color:#fff
}
.carousel-caption{
    position:absolute;
    right:15%;
    bottom:20px;
    left:15%;
    z-index:10;
    padding-top:20px;
    padding-bottom:20px;
    color:#fff;
    text-align:center;
    text-shadow:0 1px 2px rgba(0,0,0,.6)
}
.carousel-caption .btn{
    text-shadow:none
}
@media screen and (min-width:768px){
    .carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{
        width:30px;
        height:30px;
        margin-top:-10px;
        font-size:30px
    }
    .carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{
        margin-left:-10px
    }
    .carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{
        margin-right:-10px
    }
    .carousel-caption{
        right:20%;
        left:20%;
        padding-bottom:30px
    }
    .carousel-indicators{
        bottom:20px
    }
}

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap");

html, body {
    overflow-x: hidden;
    width: 100vw;
    font-family: 'Poppins', 'Roboto', sans-serif;
    transition: all 0.3s ease;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
    transition: all 0.3s ease;
}

body {
    color: rgb(233, 244, 251);
    padding: 10px;
    transition: all 0.3s ease;
    background-color: rgb(18, 22, 29);
}

.myCarousel {
    width: 100%;
    max-height: 500px;
    /* overflow: hidden; */
}

.carousel-inner .item {
    background: rgb(94, 21, 33);
    background: -moz-linear-gradient(top,  rgb(94, 21, 45) 0%, rgb(138, 35, 66) 100%); 
    background: -webkit-linear-gradient(top,  rgb(94, 21, 45) 0%, rgb(138, 35, 66) 100%); 
    background: linear-gradient(to bottom,  rgb(94, 21, 45) 0%, rgb(138, 35, 66) 100%); 
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a7cfdf', endColorstr='#23538a',GradientType=0 );
    text-align: center;
    height: 500px;
}

.transition-timer-carousel-progress-bar {
    height: 3px;
    background-color: rgb(237, 0, 73);
    width: 0;
    margin: 0;
    border: none;
    z-index: 12;
    position: relative;
    /* transition: width 0.5s linear; */
}

.control-buttons{
    text-align:center;
}

.carousel-caption {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    background-size: cover;
    background-position: center;
}

.carousel-caption h3 {
    font-size: 2em;
    margin-top: 350px;
    padding: 20px;
    /* background: rgba(0, 0, 0, 0.5); */
    border-radius: 5px;
}

.carousel-indicators li {
    border-radius: 50%;
    width: 10px;
    height: 10px;
    margin: 0 5px;
    transition: all 0.3s ease-in-out;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.carousel-indicators .active {
    border-radius: 50%;
    width: 10px;
    height: 10px;
    margin: 0 5px;
    transition: all 0.3s ease-in-out;
    box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.8);
}

#intro {
    width: 100%;
    height: 100vh;
    display: flex;
    position: relative;
    justify-content: center;
    align-items: flex-end;
    background-image: 
        radial-gradient(circle, rgba(18, 22, 29, 0.8), rgba(1, 10, 15, 1.0) 100%), 
        url('https://i.imgur.com/jnB508u.jpeg');
    background-size: cover;
    background-position: center;
}

#intro h2 {

}

#intro button {
    width: 250px;
    height: 80px;
    margin-bottom: 50px;
    border-radius: 8px;
    /* padding: 20px; */
    font-size: 25px;
    outline: none;
    border: solid 2px rgb(255, 2, 102);;
    background: rgb(187, 0, 73, 0.7);
    color: rgb(233, 244, 251);
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

#intro button:hover {
    background: rgb(255, 2, 102);
    color: rgb(250, 244, 237);
}

header {
    background-color: rgb(237, 0, 73);
    color: #fff;
    text-align: center;
    padding: 10px;
    border-radius: 10px 10px 0px 0px;
    position: relative;
    transition: all 0.3s ease;
}

header h1 {
    font-size: 36px;
    color: rgb(233, 244, 251);
    transition: all 0.3s ease;
}

#main {
    /* width: 100%; */
    /* height: 100vh; */
    /* display: flex; */
    flex-direction: column;
    transition: all 0.3s ease;
}

.hidden {
    display: none;
    transition: all 0.3s ease;
}

.show2 {
    display: flex;
    transition: all 0.3s ease;
}

.show {
    display: block;
    transition: all 0.3s ease;
}

.fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    transition: all 0.3s;
}

.fade-in.show {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.3s ease;
}

#title {
    font-size: 24px;
    font-weight: bold;
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
    /* max-width: 1200px; */
    margin: 0 auto;
}

#logo {
    width: 50px;
    height: 50px;
    /* margin-left: 10px; */
}

#series-name,
#series-title {
    flex-grow: 1;
    text-align: center;
    margin: 0;
}

#back-button {
    background-color: rgb(18, 22, 29, 0.9);
    color: rgb(233, 244, 251);
    border: none;
    padding-right: 2px;
    font-size: 26px;
    border-radius: 50%;
    cursor: pointer;
    position: absolute;
    top: 50%;
    line-height: 50px;
    transform: translateY(-50%);
    /* display: none; */
    width: 50px; 
    height: 50px; 
    text-align: center;
    left: 0;
    transition: all 0.3s ease;
    outline: none;
}

#back-button.visible {
    display: inline-block;
}

#back-button:hover {
    background-color: rgba(80, 88, 100, 0.8);
}

#series,
#home {
    opacity: 1;
    transition: opacity 0.5s ease, visibility 0s linear 0.5s;
    visibility: visible;
    transition: all 0.3s;
}

#series.hidden,
#home.hidden {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, visibility 0s linear 0s;
    transition: all 0.3s;
}

/* #carousel::before, #carousel::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 2;
    top: 0;
} */

#carousel-effect-left, #carousel-effect-right {
    position: absolute;
    top: 0;
    /* width: 400px; */
    height: 100%;
    z-index: 2;
    pointer-events: none;
    border-radius: 6px;
}

#carousel-effect-left {
    left: 0;
    /* background: linear-gradient(to left, rgb(1, 10, 15, 0.0) 0%, rgba(1, 10, 15, 0.5) 100%); */
}

#carousel-effect-right {
    right: 0;
    /* background: linear-gradient(to right, rgb(1, 10, 15, 0.0) 0%, rgba(1, 10, 15, 0.5) 100%); */
}

#carousel::before, #carousel::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 2;
    top: 0;
}

#carousel::before {
    /* background: linear-gradient(to right, rgba(1, 10, 15, 1) 0%, rgba(1, 10, 15, 0) 30%); */
    left: 0;
}

#carousel::after {
    /* background: linear-gradient(to left, rgba(1, 10, 15, 1) 0%, rgba(1, 10, 15, 0) 30%); */
    right: 0;
}

#carousel-base {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100vh;
}

#carousel {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

#carousel-images {
    display: flex;
    width: 100%;
    height: 100%;
    background-image: url("https://i.imgur.com/zXnAXED.png");
}

#carousel-images img {
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
}

#prev-button, #next-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
    z-index: 10;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 30px;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    text-align: center;
    line-height: 33px;
    transition: all 0.3s ease;
}

#prev-button:hover, #next-button:hover {
    background-color: rgba(255, 255, 255, 0.5);
}

#prev-button {
    left: 20px;
    padding-left: 7px;
}

#next-button {
    right: 20px;
    padding-right: 7px;
}

#carousel-dots {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 5px;
    transition: all 0.3s ease;
}

.dot {
    width: 10px;
    height: 10px;
    background-color: #bbb;
    border-radius: 50%;
    margin: 0 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.dot.active {
    background-color: #717171;
}

#group-favorites {
    background-color: rgb(18, 22, 29);
    border-radius: 8px;
    /* padding: 10px; */
    /* padding-top: 10px; */
    display: flex;
    flex-direction: column;
    /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); */
    /* margin-bottom: -10px; */
    transition: all 0.3s ease;
}

#group-series {
    background-color: rgb(18, 22, 29);
    border-radius: 8px;
    /* padding: 10px; */
    padding-top: 10px;
    display: flex;
    flex-direction: column;
    /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); */
    margin-bottom: -10px;
    transition: all 0.3s ease;
}

.group-series-enter {
    animation: fadeInUp 0.3s ease-in forwards;
}

#group-series-header {
  padding: 10px;
  font-size: 1.5rem;
  font-weight: bold;
  border-radius: 8px;
  background: linear-gradient(to right, rgb(29, 34, 41) 0%, rgb(18, 22, 29) 80%);
  margin-bottom: 10px;
  transition: all 0.3s ease;
  color: rgb(233, 244, 251);
}

#group-series-header h2 {
    font-size: 28px;
    color: rgb(233, 244, 251);
}

#group-series-header h3 {
    font-size: 28px;
    color: gold;
}

#group-series-cards {
    background-color: rgb(34, 34, 36);
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 10px;
    border-radius: 8px;
    background: linear-gradient(to right, rgb(29, 34, 41) 0%, rgb(18, 22, 29) 80%);
    margin-bottom: 10px;
    transition: all 0.3s ease;
}

#group-series-cards.wrap {
    flex-wrap: wrap;
}

#group-series-cards.no-wrap {
    flex-wrap: nowrap;
    white-space: nowrap;
    cursor: grab;
    overflow: hidden;
    user-select: none;
}

#group-series-button {
    flex: 0 0 auto;
    min-width: 200px;
    position: relative;
}

#group-series-cards.no-wrap::-webkit-scrollbar {
    height: 8px;
}
#group-series-cards.no-wrap::-webkit-scrollbar-thumb {
    background-color: #888;
    border-radius: 4px;
}
#group-series-cards.no-wrap::-webkit-scrollbar-track {
    background: #222;
}




.badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: linear-gradient(to right, rgb(255, 2, 102) 0%, rgb(187, 0, 73) 80%);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: #fff;
    padding: 5px 10px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    border-radius: 15px;
    z-index: 10;
    transition: background-color 0.3s ease, transform 0.3s ease, opacity 0.3s ease, background 1.3s ease;
}

#group-series-button {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    flex-wrap: wrap;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 8px;
    width: 220px;
    height: 320px;
    background-color: rgba(9, 13, 20, 0.5);
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease, background-size 0.3s ease;
    overflow: visible;
}

#group-series-button::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 8px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-image: var(--bg-image);
    z-index: 1;
    transition: filter 0.3s ease;
}

#group-series-button.disabled{
    /* pointer-events: none; */
}

#group-series-button.disabled::before {
    filter: grayscale(1);
}

#group-series-button:hover::before {
    filter: none;
}

#group-series-button:hover {
    box-shadow: 0px 7px 10px rgba(0, 0, 0, 0.5);
}

#group-series-button::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    border-radius: 8px;
    transition: opacity 0.5s ease;
    opacity: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(18, 22, 29, 0.9) 70%);
}

#group-series-button:hover::after {
    opacity: 0.8;
}

#group-series-button:hover .info {
    opacity: 1;
    transform: translateY(0px);
}

#group-series-button img {
    width: 100%;
    height: 100%;
    -o-object-fit: cover;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 8px;
}

#group-series-button .info {
    position: relative;
    z-index: 3;
    opacity: 0;
    transform: translateY(30px);
    transition: 0.5s;
    color: rgb(233, 244, 251);
}

#group-series-button .info h1 {
    font-size: 18px;
    font-size: 15px;
    color: rgb(233, 244, 251);
}

#group-series-button .info p {
    font-size: 13px;
    color: rgb(250, 244, 237);
}

#group-series-button .info button {
    margin-top: 10px;
    padding: 0.6rem;
    outline: none;
    border: none;
    border-radius: 3px;
    background: rgb(187, 0, 73);
    color: rgb(233, 244, 251);
    font-weight: bold;
    cursor: pointer;
    transition: 0.4s ease;
}

#group-series-button .info button:hover {
    background: rgb(255, 2, 102);
    color: rgb(250, 244, 237);
}

#group-search {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
    background: rgb(105, 19, 47);
    padding: 10px;
    font-size: 28px;
    font-weight: bold;
    /* margin-bottom: 10px; */
    color: rgb(233, 244, 251);
    transition: all 0.3s ease;
    gap: 10px;
    /* flex-wrap: wrap; */
    overflow: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.5) transparent;
}

#group-search::-webkit-scrollbar {
    width: 8px; 
}

#group-search::-webkit-scrollbar-track {
    background: transparent;
}

#group-search::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 4px;
    transform: translateY(10px);
}

#keys {
    display: flex;
    gap: 4px;
    transition: all 0.3s ease;
}

#group-home, #group-favorites, #group-continues {
    transition: display 0s;
}

#keys button {
    border: none;
    padding: 8px 11px;
    cursor: pointer;
    font-size: 14px;
    color: rgb(233, 244, 251);
    background-color: transparent;
    outline: none;
}

#keys button:hover {
    background: rgb(65, 2, 23);
}

#keys button.checked {
    background: rgb(161, 27, 72);
}

#search {
    display: flex;
    justify-content: flex-end;
}

.container-input {
    display: flex;
    align-items: center;
    width: auto;
    max-width: 400px;
    min-width: 150px;
    border: 1px solid rgb(99, 7, 38);
    padding: 5px 10px;
    border-radius: 4px;
    background-color: rgb(65, 2, 23);

}

.container-input .input {
    width: 100%;
    border: none;
    outline: none;
    font-size: 14px;
    background: transparent;
    color: rgb(233, 244, 251);
}

.container-input svg {
    margin-left: auto;
    fill: rgb(233, 244, 251);
}

.container-input .input::placeholder {
    color: #999;
}

.container-input .input::-webkit-input-placeholder { /* Chrome, Safari */
    color: #999;
}
.container-input .input:-moz-placeholder { /* Firefox 18- */
    color: #999;
}
.container-input .input::-moz-placeholder { /* Firefox 19+ */
    color: #999;
}
.container-input .input:-ms-input-placeholder { /* IE 10+ */
    color: #999;
}

.favorite-button {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: rgba(0, 0, 0, 0.2);
    color: rgb(255, 255, 255, 0.5);
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 22px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 0;
    z-index: 12;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.3s ease, transform 0.3s ease, background-color 0.3s ease, color 0.3s ease, filter 0.3s ease;
    pointer-events: none;
}

.favorite-button.active {
    background-color: rgba(0, 0, 0, 0.3);
    color: rgb(255, 215, 0);
    opacity: 1;
    transform: scale(1);
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.7));
    pointer-events: auto; 
}

.favorite-button:hover {
    background-color: rgba(0, 0, 0, 0.5);
    color: gold;
    opacity: 1;
    transform: scale(1);
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.7));
    pointer-events: auto;
}

.favorite-button:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

#group-series-button:hover .favorite-button {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
}

#episodes-series,
#continue-series,
#current-series {
    background-color: rgb(18, 22, 29);
    border-radius: 8px;
    /* padding: 10px; */

    display: flex;
    flex-direction: column;
    /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); */
    margin-bottom: -10px;
    transition: all 0.3s ease;
}

#continue-series {
    padding: 0px 0px 10px 0px;
}

#current-series {
    padding-top: 10px;
}

#continue-series-header,
#current-series-header {
    padding: 10px;
    font-size: 28px;
    font-weight: bold;
    border-radius: 8px;
    background: linear-gradient(to right, rgb(29, 34, 41) 0%, rgb(18, 22, 29) 80%);
    margin-bottom: 10px;
    color: rgb(233, 244, 251);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
}

#continue-series-episodes,
#current-series-episodes {
    background-color: rgb(34, 34, 36);
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    padding: 10px;
    padding-left: 10px;
    border-radius: 8px;
    background: linear-gradient(to right, rgb(29, 34, 41) 0%, rgb(18, 22, 29) 80%);
    margin-bottom: 10px;
    transition: width 0.5s ease-out;
    /* overflow: hidden */
}

#season-dropdown, #overlay-season-dropdown, #overlay-episodes-dropdown {
    padding: 5px;
    background: rgb(102, 1, 39);
    color: white;
    border: 1px solid rgb(152, 1, 39);
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    outline: none;
    transition: all 0.3s ease;
}

#overlay-season-dropdown, #overlay-episodes-dropdown {
    display: flex;
    /* margin-top: 10px; */
    align-items: center;
    padding-right: 10px;
    margin-bottom: 10px;
    height: 35px;
}

#overlay-season-dropdown option,
#overlay-episodes-dropdown option,
#season-dropdown option {
    background-color: rgb(102, 1, 39);
    background-color: rgb(56, 56, 56);
    color: white;
}

#overlay-season-dropdown:hover, 
#overlay-episodes-dropdown:hover,
#season-dropdown:hover {
    background: rgb(187, 0, 73);
}

#overlay-season-dropdown option:hover, 
#overlay-episodes-dropdown option:hover,
#season-dropdown option:hover {
    /* background-color: rgb(102, 1, 39); */
}
 
#overlay-season-dropdown:focus, 
#overlay-episodes-dropdown:focus,
#season-dropdown:focus {
     border-color: rgb(255, 2, 102);
}

#overlay-season-dropdown option:checked, 
#overlay-episodes-dropdown option:checked,
#season-dropdown option:checked {
    background-color: rgb(102, 1, 39);
}

#continue-episode-button,
#episode-button {
    position: relative;
    width: 250px;
    height: 150px;
    background-color: rgb(10, 14, 20);
    border-radius: 8px;
    /* padding: 20px; */
    text-align: center;
    color: white;
    cursor: pointer;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    margin: 10px 10px 10px 0px;
    transition: background-image 0.3s ease-in-out, transform 0.3s ease, all 0.3s;
    user-select: none;
}

.episode-thumb {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.3s ease-in;
    user-select: none;
}

#continue-episode-button:hover,
#episode-button:hover {
    /* width: 270px;
    height: 150px; */

    transform: scale(1.05);
}

#continue-episode-button p,
#episode-button p {
    font-size: 13px;
    color: white;
    text-align: center;
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-weight: bold;
    background: linear-gradient(to bottom, rgb(200, 209, 214), rgb(255, 255, 255));
    text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.7);
    -webkit-background-clip: text;
    color: transparent;
    
    /* FIX MANUAL */
    position: relative;
    top: 80%;

}

#continue-episode-button:hover p,
#episode-button:hover p {
    background: linear-gradient(to bottom, rgb(250, 247, 228), rgb(226, 179, 127));
    text-shadow: 2px 2px 5px rgba(145, 87, 33, 0.7);
    -webkit-background-clip: text;
    color: transparent;
}

#continue-episode-button:hover::after,
#episode-button:hover::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translate(-50%, -50%);
    background-image: url('https://i.imgur.com/Uj4TeJR.png');
    background-image: url('https://i.imgur.com/J9tWuW3.png');
    background-size: cover;
    background-position: center;
    opacity: 0.6;
    pointer-events: none;
    top: 45%;
    width: 80px;
    height: 80px;

}

#continue-episode-button::after,
#episode-button::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    background-image: url('https://i.imgur.com/J9tWuW3.png');
    background-size: cover;
    background-position: center;
    opacity: 0;
    pointer-events: none;
    top: 45%;
    width: 80px;
    height: 80px;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

#continue-episode-button:hover::before,
#episode-button:hover::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 8px;
    pointer-events: none;
}

#continue-episode-button::before,
#episode-button::before {
    border: 1px solid rgb(1, 10, 15);
    background-color: rgba(1, 10, 15, 0.9);
    box-shadow: 0 0px 20px rgba(14, 18, 24, 0.4), 0 0px 20px rgba(14, 18, 24, 0.1);
}

#continue-episode-button:has(.remove-button:hover)::before,
#episode-button:has(.remove-button:hover)::before {
    border: 1px solid rgb(226, 127, 127);
    box-shadow: 0 4px 10px rgba(226, 127, 127, 0.4), 0 8px 20px rgba(226, 127, 127, 0.1);
    background-color: rgba(128, 28, 28, 0.8);

    border: 1px solid rgb(237, 0, 73);
    box-shadow: 0 4px 10px rgba(152, 1, 39, 0.4), 0 8px 20px rgba(152, 1, 39, 0.1);
    background-color: rgba(102, 1, 39, 0.8);
}

#continue-episode-button.active::before,
#episode-button.active::before {
    border: 1px solid rgb(237, 0, 73);
    box-shadow: 0 4px 10px rgba(152, 1, 39, 0.4), 0 8px 20px rgba(152, 1, 39, 0.1);
    background-color: rgba(102, 1, 39, 0.8);
}

#continue-series-episodes #episode-button.active::before,
#current-series-episodes #episode-button.active::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 8px;
    pointer-events: none;
}

#continue-series-episodes #episode-button.active::after,
#current-series-episodes #episode-button.active::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translate(-50%, -50%);
    background-image: url('https://i.imgur.com/Uj4TeJR.png');
    background-size: cover;
    background-position: center;
    opacity: 0.6;
    pointer-events: none;
    top: 45%;
    width: 80px;
    height: 80px;
}

#continue-series-episodes #episode-button.active:hover::before,
#current-series-episodes #episode-button.active:hover::before {
    border: 1px solid rgb(255, 2, 102);
    box-shadow: 0 2px 5px rgba(255, 2, 102, 0.7), 0 6px 15px rgba(255, 2, 102, 0.3);
    background-color: rgba(255, 2, 102, 0.4);
}

#continue-episode-button.active p,
#episode-button.active p {
    background: linear-gradient(to bottom, rgb(200, 209, 214), rgb(255, 255, 255));
    text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.7);
    -webkit-background-clip: text;
    color: transparent;
}

.duration {
    position: absolute;
    bottom: 7px;
    right: 7px;
    background-color: rgba(25, 25, 25, 0.7);
    color: white;
    padding: 0px 8px;
    font-size: 12px;
    border-radius: 12px;
    line-height: 24px;
    height: 24px;
}

.episode-title {
    margin-top: 0px;
    /* margin-left: 10px; */
    font-size: 13px;
    text-align: left;
    color: rgb(233, 244, 251);
}

.remove-button {
    position: absolute;
    top: 5px;
    right: 5px;
    cursor: pointer;
    font-size: 18px;
    background: rgba(255, 255, 255, 0.2);
    padding: 2px;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    transition: all 0.3s ease;
}

.remove-button:hover {
    background: rgba(255, 255, 255, 0.5);
}

.episode-item {
    margin-bottom: 5px;
}

.episode-item a {

}

.episode-item ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.episode-item li {
    margin-bottom: 5px;
}

#video-overlay {
    position: fixed;
    top: 0%;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: all 0.3s ease;
    background: rgba(9, 13, 20, 0.8);
}

#video-overlay.hidden {
    display: none;
}

#video-overlay-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
}

#video-overlay-dropdown{
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-right: 45px;
}

#video-container {
    position: relative;
    width: 80%;
    height: 85%;
    background: black;
    padding: 10px;
    border-radius: 10px;
    justify-content: center;
    align-items: center;
    transition: all 0.3s ease;
}

#video-iframe {
    width: 100%;
    height: 95%;
    border: none;
    border-radius: 5px;
    background-color: rgb(1, 10, 15);
    background-color: rgb(0, 0, 0);
}

@keyframes initial-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#toggle-buttons-container {
    display: flex;
    gap: 10px;
    /* margin-top: 10px; */
    align-items: center;
    padding-right: 10px;
    margin-bottom: 10px;
    height: 35px;
}

#toggle-buttons-container button {
    padding: 10px;
    background: rgb(102, 1, 39);
    /* background: rgb(255, 2, 102); */
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#toggle-buttons-container button:hover {
    background: rgb(187, 0, 73);
}

#toggle-buttons-container button.active {
    background: rgb(255, 2, 102);
    /* font-weight: bold; */
}

#close-overlay-button {
    border: none;
    color: rgb(205, 205, 205);
    font-size: 20px;
    cursor: pointer;
    transition: transform 0.6s ease;
    animation: initial-rotate 0.6s ease;
    border-radius: 5px;
    width: 35px;
    height: 35px;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(222, 222, 222, 0.2);
    transition: all 0.3s ease;
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgb(29, 34, 41, 0.8);
}

#close-overlay-button span {
    display: inline-block;
    transition: transform 0.6s ease;
    line-height: 2px;
    margin-left: 1.5px;
}

#close-overlay-button:hover {
    background: rgb(129, 134, 141, 0.5);
}

#close-overlay-button:hover span {
    transform: rotate(360deg);
}

@keyframes initial-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#prev-video-button,
#next-video-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(222, 222, 222, 0.2);
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 24px;
    line-height: 52px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgb(29, 34, 41, 0.8);
}

#prev-video-button:hover,
#next-video-button:hover {
    background-color: rgba(222, 222, 222, 0.5);
    background: rgb(129, 134, 141, 0.5);
}

#prev-video-button {
    left: -80px;
}

#next-video-button {
    right: -80px;
}

#prev-video-button:hover .tooltip-text,
#next-video-button:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

.tooltip-text {
    visibility: hidden;
    background-color: rgba(255, 255, 255, 0.5);
    color: #fff;
    text-align: center;
    border-radius: 5px;
    padding: 5px;
    position: absolute;
    z-index: 10001;
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 17px;
    /* max-width: 100px;
    max-height: 40px; */
    background: rgb(129, 134, 141, 0.5);
    transition: opacity 0.3s ease, visibility 0.3s ease;
    transform: translateX(-50%);
    white-space: nowrap;
    visibility: hidden;
}

.tooltip-text.black {
    background-color: rgba(0, 0, 0, 0.8);
}
.tooltip-top.black::after {
    border-top: 5px solid rgba(0, 0, 0, 0.8);
}
.tooltip-left.black::after{
    border-right: 5px solid rgba(0, 0, 0, 0.8);
}
.tooltip-right.black::after{
    border-left: 5px solid rgba(0, 0, 0, 0.8);
}
.tooltip-bottom.black::after{
    border-bottom: 5px solid rgba(0, 0, 0, 0.8);
}

.tooltip-top {
    bottom: 130%;
    left: 50%;
    transform: translateX(-50%);
    line-height: 1.5;
}

.tooltip-top::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid rgba(255, 255, 255, 0.5);
    border-top: 5px solid rgb(129, 134, 141, 0.5);
}

.tooltip-left {
    top: 50%;
    left: 100%;
    transform: translateY(-50%);
}

.tooltip-left::after {
    content: '';
    position: absolute;
    top: 50%;
    left: -5px;
    transform: translateY(-50%);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-right: 5px solid rgba(255, 255, 255, 0.5);
    border-right: 5px solid rgb(129, 134, 141, 0.5);
}

.tooltip-right {
    top: 50%;
    right: 150%;
    transform: translateY(-50%);
}

.tooltip-right::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -5px;
    transform: translateY(-50%);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 5px solid rgba(255, 255, 255, 0.5);
    border-left: 5px solid rgb(129, 134, 141, 0.5);
}

.tooltip-bottom {
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
}

.tooltip-bottom::after {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid rgba(255, 255, 255, 0.5);
    border-bottom: 5px solid rgb(129, 134, 141, 0.5);
}

p {
    margin: 0;
}

.shake {
    transition: transform 0.1s ease-in-out;
}

.shake-left {
    transform: translateX(-5px);
}

.shake-right {
    transform: translateX(5px);
}

.fade-in-up {
    animation: fadeInUp 0.3s ease-out forwards;
}

@keyframes fadeInUp {
    0% {
        opacity: 0;
        transform: translateX(-50px);
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

.slide-in-right {
    animation: slideInRight 0.5s ease-out forwards;
}

@keyframes slideInRight {
    0% { opacity: 0; transform: translateX(-20px); }
    100% { opacity: 1; transform: translateX(0); }
}

.slide-out-right {
    animation: slideOutRight 0.5s ease-out forwards;
}

@keyframes slideOutRight {
    0% { opacity: 1; transform: translateX(0); }
    100% { opacity: 0; transform: translateX(20px); }
}

@media (max-width: 2560px) {
    #group-series-button{
        width: 227px;
    }

    #continue-episode-button, #episode-button {
        width: 257px;
    }
}

@media (max-width: 1366px) {
    #group-series-button {
        width: 230px;
    }

    #continue-episode-button, #episode-button {
        width: 237px;
    }
}

@media (max-width: 768px) {
    .myCarousel {
        max-height: 200px;
    }
    
    .carousel-inner .item  {
        height: 200px;
    }

    #group-search {
        flex-direction: column;
        align-items: stretch;
    }

    #keys {
        /* order: 2; */
        gap: 5px;
        z-index: 2;
        justify-content: center;
        flex-wrap: wrap;
    }

    #search {
        /* order: 1; */
        width: 100%;
        justify-content: center;
    }

    .container-input {
        width: 30px;
    }

    .container-input {
        width: 100%;
    }
    .container-input:hover,
    .container-input:focus-within {
        width: 100%;
    }

    #keys button {
        padding: 4px;
        font-size: 10px;
    }

    #group-series-button {
        width: 160px;
        height: 250px;
    }

    #group-series-button .info h1 {
        font-size: 11px;
    }

    #group-series-button .info p {
        font-size: 10px;
    }

    #group-series-button .info button {
        padding: 0.4rem;
    }

    header h1 {
        font-size: 20px;
    }

    #back-button {
        font-size: 20px;
        width: 35px;
        height: 35px;
        line-height: 35px;
    }

    #continue-episode-button, #episode-button {
        width: 100%;
        height: 200px;
    }

    #continue-episode-button:hover, #episode-button:hover {
        transform: scale(1.03);
    }

    #current-series-episodes,
    #current-series-header {
        display: block;
    }

    #current-series-header #series-available-text {
        font-size: 22px;
    }

    #season-dropdown {
        width: 100%;
    }

    #video-overlay-header {
        display: block;
    }

    @keyframes fadeInUp {
        0% {
            opacity: 0;
            transform: translateY(-50px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInRight {
        0% { opacity: 0; transform: translateY(-20px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideOutRight {
        0% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(20px); }
    }
}
    </style>

    <script>
const seriesData = [
    {
        group_name: "ANIMES",
        group: [
            //SOLO LEVELING
            {
                name: "Solo Leveling",
                thumb_page: "",
                thumb_buttons: [
                    // "https://animesbr.tv/wp-content/uploads/2025/01/vTCjCkwHn3bfqVLdQjZke3c8w7l-200x300.jpg",
                    "https://i.imgur.com/x3j8fU5.jpeg",
                    "https://i.imgur.com/seZ30fi.jpeg",
                ],
                badge: "",
                enabled: true,
                season: [
                    {
                        name: "Temporada 01",
                        thumb_season: "https://i.imgur.com/h9XkuUs.jpeg",
                        movies: false,
                        episodes: [
                            { title: "Episódio 001", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/wyjphDUt1vrlckpvfPd0TekuqMm-300x170.jpg", url: "https://secvideo1.online/embed/852574/", alternative: ["https://secvideo1.online/embed/852573/"] },
                            { title: "Episódio 002", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/ch5o2NnATbswomEiCugOgjX8IwY-300x170.jpg", url: "https://secvideo1.online/embed/852576/", alternative: ["https://secvideo1.online/embed/852575/"] },
                            { title: "Episódio 003", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/3h4QyKMODJiOQKqfuL4NrehcV43-300x170.jpg", url: "https://secvideo1.online/embed/852578/", alternative: ["https://secvideo1.online/embed/852577/"] },
                            { title: "Episódio 004", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/2zbHJNbyuGEdyGVOyJpv24qgf2w-300x170.jpg", url: "https://secvideo1.online/embed/852580/", alternative: ["https://secvideo1.online/embed/852579/"] },
                            { title: "Episódio 005", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/vPpiI1sKgiJgWykydYzOf2XfCcR-300x170.jpg", url: "https://secvideo1.online/embed/852582/", alternative: ["https://secvideo1.online/embed/852581/"] },
                            { title: "Episódio 006", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/jeyh5o40BjSmkYxv1FV7OMqJn9m-300x170.jpg", url: "https://secvideo1.online/embed/852584/", alternative: ["https://secvideo1.online/embed/852583/"] },
                            { title: "Episódio 007", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/3UGTVLFHcAIQgjolx6rQpCottRj-300x170.jpg", url: "https://secvideo1.online/embed/852586/", alternative: ["https://secvideo1.online/embed/852585/"] },
                            { title: "Episódio 008", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/mYoah2DtfKVqGMtuCBmgeZYCQoM-300x170.jpg", url: "https://secvideo1.online/embed/852588/", alternative: ["https://secvideo1.online/embed/852587/"] },
                            { title: "Episódio 009", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/7qqZfujgsWgLWY3KtefvfH7pHb0-300x170.jpg", url: "https://secvideo1.online/embed/852590/", alternative: ["https://secvideo1.online/embed/852589/"] },
                            { title: "Episódio 010", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/anFjSYbyhwOntz31Qr0Egl9qnGz-300x170.jpg", url: "https://secvideo1.online/embed/852592/", alternative: ["https://secvideo1.online/embed/852591/"] },
                            { title: "Episódio 011", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/xzpmAZTcFO5hTFopn8Idu7BRsl3-300x170.jpg", url: "https://secvideo1.online/embed/852594/", alternative: ["https://secvideo1.online/embed/852593/"] },
                            { title: "Episódio 012", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/6kjROrp76VDJyfImdqUzmL7zdJM-300x170.jpg", url: "https://secvideo1.online/embed/852596/", alternative: ["https://secvideo1.online/embed/852595/"] },
                        ]
                    },

                    {
                        name: "Temporada 02",
                        thumb_season: "https://i.imgur.com/h9XkuUs.jpeg",
                        movies: false,
                        episodes: [
                            { title: "Episódio 001 - (13)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/01/6J8Ps6ma4TMsGtbjRsRM18myueQ-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E01_LEGENDADO/2x1.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E01_DUBLADO/2x1.html" ] },
                            { title: "Episódio 002 - (14)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/01/mUa5CdHS3IBbYPlXNqSATKZY5gV-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E02_LEGENDADO/2x2.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E02_DUBLADO/2x2.html" ] },
                            { title: "Episódio 003 - (15)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/01/ksoMkIBX9HxzvShzOxUvi4WhlFj-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E03_LEGENDADO/2x3.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E03_DUBLADO/2x3.html" ] },
                            { title: "Episódio 004 - (16)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/01/yaaTlWhfJOJjKDbZZRTabnb6Mxm-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E04_LEGENDADO/2x4.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E04_DUBLADO/2x4.html" ] },
                            { title: "Episódio 005 - (17)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/02/mfztqiGjHPmHBUNok763a1rDsVn-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E05_LEGENDADO/2x5.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E05_DUBLADO/2x5.html" ] },
                            { title: "Episódio 006 - (18)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/02/2i5MVDxqDS9pfb1MIT8mWUXuNlL-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E06_LEGENDADO/2x6.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E06_DUBLADO/2x6.html" ] },
                            { title: "Episódio 007 - (19)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/02/uMbOgKFOmN9dykVizBYG9atln7c-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E07_LEGENDADO/2x7.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E07_DUBLADO/2x7.html" ] },
                            { title: "Episódio 008 - (20)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/02/unMSFOjTEsQ0rNfqkvQSfE4ar6S-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E08_LEGENDADO/2x8.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E08_DUBLADO/2x8.html" ] },
                            { title: "Episódio 009 - (21)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/03/eQYTEGlP7TXLkbagw5rMlTOgvTZ-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E09_LEGENDADO/2x9.html" , alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E09_DUBLADO/2x9.html" ] },
                            { title: "Episódio 010 - (22)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/03/iTx8x2eH79xFGRQAs1Q7nIzbQK4-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E10_LEGENDADO/2x10.html", alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E10_DUBLADO/2x10.html"] },
                            { title: "Episódio 011 - (23)", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2025/03/7GtWwrxlrQAyipgbKm6XO6daROu-300x170.jpg", url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E11_LEGENDADO/2x11.html", alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E11_DUBLADO/2x11.html"] },
                            { title: "Episódio 012 - (24)", duration: "", thumb: "https://image.tmdb.org/t/p/w154/pZJ7QB0QA3hDlBR1KBdSzQcG8hi.jpg",                        url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E12_LEGENDADO/2x12.html", alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E12_DUBLADO/2x12.html"] },
                            { title: "Episódio 013 - (25)", duration: "", thumb: "https://image.tmdb.org/t/p/w154/dsXC84kGPEbHWkSKSWOIYodjMVv.jpg",                        url: "https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E13_LEGENDADO/2x13.html", alternative: ["https://playflix.to/ANIMES/Solo%20Leveling/Solo%20Leveling_S02E13_DUBLADO/2x13.html"] },
                        ]
                    }
                ]
            },

            //HAIKYU
            {
                name: "Haikyu",
                thumb_page: "",
                thumb_buttons: [
                    // "https://animesbr.tv/wp-content/uploads/2025/01/vTCjCkwHn3bfqVLdQjZke3c8w7l-200x300.jpg",
                    "https://animesonlinecc.to/wp-content/uploads/2020/01/6R2GkrQW8ZRlZAhEdVKwJjrANwS-185x278.jpg",
                    "https://animefire.plus/img/animes/haikyuu-large.webp",
                ],
                badge: "",
                enabled: true,
                season: [
                    {
                        name: "Temporada 01",
                        thumb_season: "https://i.imgur.com/h9XkuUs.jpeg",
                        movies: false,
                        episodes: [
                            { title: "Episódio 001", duration: "", thumb: "https://animesbr.tv/wp-content/uploads/2024/03/wyjphDUt1vrlckpvfPd0TekuqMm-300x170.jpg", url: "https://secvideo1.online/embed/852574/", alternative: ["https://secvideo1.online/embed/852573/"] },
                       ]
                    }
                ]
            }            
        ]
    },
    
    {
        group_name: "Canais Ao Vivo",
        group: [
            //ESPN
            {
                name: "ESPN",
                badge: "",
                type: "Canais",
                enabled: true,
                canais: true,
                thumb_page: "",
                thumb_buttons: ["https://i.imgur.com/53B8dup.jpeg"],
                season: [
                    {
                        name: "",
                        thumb_season: "https://i.imgur.com/I8OUTvv.jpeg",
                        movies: false,
                        episodes: [
                            { title: "ESPN"  , duration: "", thumb: "https://i.imgur.com/I8OUTvv.jpeg", url: "https://embedtv-0.icu/espn" , alternative: [ "https://nossoplayeronlinehd.com/tv/espn" , "https://reidoscanais.tv/embed/?id=espn" , "https://embedcanaistv.com/espn" , "https://meuplayeronlinehd.com/myplay/watch.html?id=espn" ] },
                            { title: "ESPN 2", duration: "", thumb: "https://i.imgur.com/vRCgGl5.jpeg", url: "https://embedtv-0.icu/espn2", alternative: [ "https://nossoplayeronlinehd.com/tv/espn2", "https://reidoscanais.tv/embed/?id=espn2", "https://embedcanaistv.com/espn2", "https://meuplayeronlinehd.com/myplay/watch.html?id=espn2"] },
                            { title: "ESPN 3", duration: "", thumb: "https://i.imgur.com/27Tm9mL.jpeg", url: "https://embedtv-0.icu/espn3", alternative: [ "https://nossoplayeronlinehd.com/tv/espn3", "https://reidoscanais.tv/embed/?id=espn3", "https://embedcanaistv.com/espn3", "https://meuplayeronlinehd.com/myplay/watch.html?id=espn3"] },
                            { title: "ESPN 4", duration: "", thumb: "https://i.imgur.com/Edy8ne7.jpeg", url: "https://embedtv-0.icu/espn4", alternative: [ "https://nossoplayeronlinehd.com/tv/espn4", "https://reidoscanais.tv/embed/?id=espn4", "https://embedcanaistv.com/espn4", "https://meuplayeronlinehd.com/myplay/watch.html?id=espn4"] },
                            { title: "ESPN 5", duration: "", thumb: "https://i.imgur.com/wDNvEok.jpeg", url: "https://embedtv-0.icu/espn5", alternative: [ "https://nossoplayeronlinehd.com/tv/espn5", "https://reidoscanais.tv/embed/?id=espn5", "https://embedcanaistv.com/espn5", "https://meuplayeronlinehd.com/myplay/watch.html?id=espn5"] },
                        ]
                    },
                ]
            },

            //SPORTV
            {
                name: "SPORTV",
                badge: "",
                type: "Canais",
                enabled: true,
                canais: true,
                thumb_page: "",
                thumb_buttons: ["https://i.imgur.com/m8tPb5P.jpeg"],
                season: [
                    {
                        name: "",
                        thumb_season: "https://i.imgur.com/DEwKECu.jpeg",
                        movies: false,
                        episodes: [
                            { title: "SPORTV"   , duration: "", thumb: "https://i.imgur.com/DEwKECu.jpeg", url: "https://embedtv-0.icu/sportv"  , alternative: [ "https://nossoplayeronlinehd.com/tv/sportv"  , "https://reidoscanais.tv/embed/?id=sportv"  , "https://embedcanaistv.com/sportv"  , "https://meuplayeronlinehd.com/myplay/watch.html?id=sportv"  ] },
                            { title: "SPORTV 2" , duration: "", thumb: "https://i.imgur.com/OMx7ocU.jpeg", url: "https://embedtv-0.icu/sportv2" , alternative: [ "https://nossoplayeronlinehd.com/tv/sportv2" , "https://reidoscanais.tv/embed/?id=sportv2" , "https://embedcanaistv.com/sportv2" , "https://meuplayeronlinehd.com/myplay/watch.html?id=sportv2" ] },
                            { title: "SPORTV 3" , duration: "", thumb: "https://i.imgur.com/gli9wCu.jpeg", url: "https://embedtv-0.icu/sportv3" , alternative: [ "https://nossoplayeronlinehd.com/tv/sportv3" , "https://reidoscanais.tv/embed/?id=sportv3" , "https://embedcanaistv.com/sportv3" , "https://meuplayeronlinehd.com/myplay/watch.html?id=sportv3" ] },
                            { title: "SPORTV 4" , duration: "", thumb: "https://i.imgur.com/Gbc7eDS.jpeg", url: "https://embedtv-0.icu/sportv4" , alternative: [ "https://nossoplayeronlinehd.com/tv/sportv4" , "https://reidoscanais.tv/embed/?id=sportv4" , "https://embedcanaistv.com/sportv4" , "https://meuplayeronlinehd.com/myplay/watch.html?id=sportv4" ] },                        
                        ]
                    },
                ]
            },

            //PREMIERE
            {
                name: "PREMIERE",
                badge: "",
                type: "Canais",
                enabled: true,
                canais: true,
                thumb_page: "",
                thumb_buttons: ["https://i.imgur.com/NLvBCb3.jpeg"],
                season: [
                    {
                        name: "",
                        thumb_season: "https://i.imgur.com/wkdeLZf.jpeg",
                        movies: false,
                        episodes: [
                            { title: "PREMIERE"   , duration: "", thumb: "https://i.imgur.com/wkdeLZf.jpeg", url: "https://embedtv-0.icu/premiere"  , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere"  , "https://reidoscanais.tv/embed/?id=premiere"  , "https://embedcanaistv.com/premiere"  , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere"  ] },
                            { title: "PREMIERE 2" , duration: "", thumb: "https://i.imgur.com/f2C904C.jpeg", url: "https://embedtv-0.icu/premiere2" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere2" , "https://reidoscanais.tv/embed/?id=premiere2" , "https://embedcanaistv.com/premiere2" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere2" ] },
                            { title: "PREMIERE 3" , duration: "", thumb: "https://i.imgur.com/IPnjvsx.jpeg", url: "https://embedtv-0.icu/premiere3" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere3" , "https://reidoscanais.tv/embed/?id=premiere3" , "https://embedcanaistv.com/premiere3" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere3" ] },
                            { title: "PREMIERE 4" , duration: "", thumb: "https://i.imgur.com/oB4V038.jpeg", url: "https://embedtv-0.icu/premiere4" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere4" , "https://reidoscanais.tv/embed/?id=premiere4" , "https://embedcanaistv.com/premiere4" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere4" ] },                        
                            { title: "PREMIERE 5" , duration: "", thumb: "https://i.imgur.com/PlPh3Zx.jpeg", url: "https://embedtv-0.icu/premiere5" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere5" , "https://reidoscanais.tv/embed/?id=premiere5" , "https://embedcanaistv.com/premiere5" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere5" ] },                        
                            { title: "PREMIERE 6" , duration: "", thumb: "https://i.imgur.com/pNwZ8Kh.jpeg", url: "https://embedtv-0.icu/premiere6" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere6" , "https://reidoscanais.tv/embed/?id=premiere6" , "https://embedcanaistv.com/premiere6" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere6" ] },                        
                            { title: "PREMIERE 7" , duration: "", thumb: "https://i.imgur.com/SzWRFTY.jpeg", url: "https://embedtv-0.icu/premiere7" , alternative: [ "https://nossoplayeronlinehd.com/tv/premiere7" , "https://reidoscanais.tv/embed/?id=premiere7" , "https://embedcanaistv.com/premiere7" , "https://meuplayeronlinehd.com/myplay/watch.html?id=premiere7" ] },                        
                        ]
                    },
                ]
            },
        ]
    },
];

// localStorage.clear();
let autoPlay                    = true;
let fullEpisodesList            = true;
let animationReverseEpisodes    = false;
let animationReverseFavorites   = false;
let animationReverseContinues   = false;
let animationSpeedEpisodes      = 3;
let animationSpeedFavorites     = 10;
let animationSpeedButtons       = 30;
let animationSpeedSearchsKeys   = 2;
let animationSpeedCarrouselBar  = 8;

const selectedThumbs            = {};
const thumbnailCache            = {};
let   favorites                 = JSON.parse(localStorage.getItem('favorites')) || [];
let   continues                 = JSON.parse(localStorage.getItem('continues')) || {};
let   currentSerie              = null;
let   currentEpisodeIndex       = 0;
let   currentSeasonIndex        = 0;
let   cumulativeAnimationIndex  = 0;
let   previousEpisodeCount      = 0;

//SERIE ATUAL
function renderCurrentSeries(serie) {
    const seriesContainer = document.getElementById('series');
    const seriesNameContainer = document.getElementById('series-name');

    seriesContainer.innerHTML = '';
    seriesNameContainer.innerHTML = '';

    seriesNameContainer.innerHTML = `<h1>${serie.name}</h1>`;
    if (serie.season.length === 0 && (!serie.movies || serie.movies.length === 0)) {
        seriesContainer.innerHTML = `
        <div id="current-series">
            <div id="current-series-header">
                <p>Nenhum episódio ou filme disponível.</p>
            </div>
        </div>
        `;
        return;
    }

    currentSerie = serie;
    currentSeasonIndex = 0;

    const serieKey = serie.name.replace(/\s+/g, '_');
    const initialSeasonKey = serie.season[currentSeasonIndex].name || `Temporada_${currentSeasonIndex + 1}`;
    const seasonProgress = continues[serieKey] && continues[serieKey][initialSeasonKey];
    currentEpisodeIndex = (seasonProgress && seasonProgress.episodeIndex !== undefined) ? seasonProgress.episodeIndex : 0;

    const hasSeasons = serie.season.length > 0;
    const showDropdown = hasSeasons && (serie.season.length > 1);

    const currentSeason = serie.season[0];
    const isMovie = currentSeason.movies;
    const seasonsOfSameType = serie.season.filter(s => !!s.movies === !!isMovie);
    const relativeIndex = serie.season.slice(0, 0).filter(s => !!s.movies === !!isMovie).length;
    let availableText = isMovie ? 'Filmes disponíveis' : 'Episódios disponíveis';
    if (seasonsOfSameType.length > 1) {
        availableText = `T${relativeIndex + 1} - ${availableText}`;
    }
    availableText += `: ${currentSeason.episodes.length}`;

    const currentSeriesHTML = `
        <div id="current-series">
            <div id="current-series-header">
                <p id="series-available-text">${availableText}</p>
                ${showDropdown ? `
                    <select id="season-dropdown">
                        ${serie.season.map((season, index) => {
                            const seasonDisplay = season.name ? season.name : `Temporada ${index + 1}`;
                            return `<option value="season-${index}">${seasonDisplay}</option>`;
                        }).join('')}
                    </select>
                ` : ''}
            </div>
            <div id="current-series-episodes">
                ${renderEpisodes(currentSeason)}
            </div>
        </div>
    `;
    seriesContainer.innerHTML = currentSeriesHTML;
    renderContinueWatchingSection();

    // Animação inicial
    animateEpisodes(currentSeason.episodes.length, previousEpisodeCount);
    previousEpisodeCount = currentSeason.episodes.length; // Atualiza o contador

    if (showDropdown) {
        const seasonDropdown = document.getElementById('season-dropdown');
        seasonDropdown.addEventListener('change', function() {
            currentSeasonIndex = parseInt(this.value.split('-')[1], 10);
            const selectedSeason = serie.season[currentSeasonIndex];
        
            const selectedSeasonKey = selectedSeason.name || `Temporada_${currentSeasonIndex + 1}`;
            const seasonProgress = continues[serieKey] && continues[serieKey][selectedSeasonKey];
            currentEpisodeIndex = (seasonProgress && seasonProgress.episodeIndex !== undefined) ? seasonProgress.episodeIndex : 0;
        
            const isMovieSelected = selectedSeason.movies;
            const seasonsOfSameTypeSelected = serie.season.filter(s => !!s.movies === !!isMovieSelected);
            const relativeIndexSelected = serie.season.slice(0, currentSeasonIndex).filter(s => !!s.movies === !!isMovieSelected).length;
            let updatedAvailableText = isMovieSelected ? 'Filmes disponíveis' : 'Episódios disponíveis';
            if (seasonsOfSameTypeSelected.length > 1) {
                updatedAvailableText = `T${relativeIndexSelected + 1} - ${updatedAvailableText}`;
            }
            updatedAvailableText += `: ${selectedSeason.episodes.length}`;
            document.getElementById('series-available-text').innerText = updatedAvailableText;
        
            // Anima e renderiza os episódios
            animateEpisodes(selectedSeason.episodes.length, previousEpisodeCount, () => {
                document.getElementById('current-series-episodes').innerHTML = renderEpisodes(selectedSeason);
                setupThumbnailLoading();
                addEpisodeButtonListeners();
                updateButtonVisibility();
                // renderContinueWatchingSection();
        
                const episodeButtons = document.querySelectorAll('#episode-button');
                if (seasonProgress && seasonProgress.activeEpisodeIndex !== undefined) {
                    if (episodeButtons[seasonProgress.activeEpisodeIndex]) {
                        episodeButtons[seasonProgress.activeEpisodeIndex].classList.add('active');
                    }
                } else if (episodeButtons[currentEpisodeIndex]) {
                    episodeButtons[currentEpisodeIndex].classList.add('active');
                }
            });
        
            previousEpisodeCount = selectedSeason.episodes.length; // Atualiza o contador
        });
    }

    addEpisodeButtonListeners();
    updateButtonVisibility();
    setupThumbnailLoading();

    const episodeButtons = document.querySelectorAll('#episode-button');
    if (seasonProgress && seasonProgress.activeEpisodeIndex !== undefined) {
        if (episodeButtons[seasonProgress.activeEpisodeIndex]) {
            episodeButtons[seasonProgress.activeEpisodeIndex].classList.add('active');
        }
    } else if (episodeButtons[currentEpisodeIndex]) {
        episodeButtons[currentEpisodeIndex].classList.add('active');
    }
}

function animateEpisodes(currentCount, previousCount, callback) {
    const episodeContainer = document.getElementById('current-series-episodes');
    const episodeContainers = episodeContainer.querySelectorAll('.episode-container');

    if (animationReverseEpisodes) {
        // Comportamento original quando animationReverseEpisodes é true
        if (currentCount > previousCount) {
            // Mais episódios: anima os novos após renderizar
            if (callback) callback(); // Renderiza os novos episódios primeiro
            const newEpisodeContainers = episodeContainer.querySelectorAll('.episode-container');
            newEpisodeContainers.forEach((episode, index) => {
                episode.style.opacity = '0';
                if (index >= previousCount) {
                    setTimeout(() => {
                        episode.classList.add('slide-in-right');
                        episode.style.opacity = '1';
                    }, (index - previousCount) * (animationSpeedEpisodes * 10));
                } else {
                    episode.style.opacity = '1';
                }
            });
        } else if (currentCount < previousCount) {
            // Menos episódios: anima a remoção dos excedentes de trás para frente
            const episodesToRemove = previousCount - currentCount;
            episodeContainers.forEach((episode, index) => {
                if (index < currentCount) {
                    episode.style.opacity = '1'; // Mantém os que ficam
                } else {
                    const reverseIndex = episodesToRemove - (index - currentCount) - 1;
                    setTimeout(() => {
                        episode.classList.add('slide-out-right');
                    }, reverseIndex * (animationSpeedEpisodes * 10));
                }
            });
            const totalAnimationTime = episodesToRemove * (animationSpeedEpisodes * 10) + 500;
            setTimeout(() => {
                if (callback) callback();
            }, totalAnimationTime);
        } else {
            // Mesmo número: renderiza sem animação
            if (callback) callback();
            const newEpisodeContainers = episodeContainer.querySelectorAll('.episode-container');
            newEpisodeContainers.forEach(episode => {
                episode.style.opacity = '1';
            });
        }
    } else {
        // Quando animationReverseEpisodes é false: recarrega tudo do início para a direita
        if (callback) callback(); // Renderiza os novos episódios primeiro
        const newEpisodeContainers = episodeContainer.querySelectorAll('.episode-container');
        newEpisodeContainers.forEach((episode, index) => {
            // Remove qualquer animação anterior
            episode.classList.remove('slide-in-right', 'slide-out-right');
            episode.style.opacity = '0'; // Começa invisível
            // Aplica animação de entrada da esquerda para a direita
            setTimeout(() => {
                episode.classList.add('slide-in-right');
                episode.style.opacity = '1';
            }, index * 30); // Atraso incremental para cada episódio
        });
    }
}

function renderEpisodes(season) {
    return season.episodes.map((episode, index) => {
        const fallbackThumb = season.thumb_season; // Fallback é a thumb da temporada
        const episodeThumb = episode.thumb || fallbackThumb; // Thumb do episódio, se disponível

        // Define o texto do título (lógica do antigo)
        const titleText = !episode.title 
            ? `Episódio ${index + 1}`
            : /^\d{1,3}$/.test(episode.title.trim()) 
                ? `Episódio ${parseInt(episode.title, 10)}`
                : episode.title;

        // Retorna o HTML combinando o estilo antigo com a otimização nova
        return `
            <div class="episode-container">
                <div id="episode-button" 
                        data-url="${episode.url}" 
                        data-alternative='${JSON.stringify(episode.alternative || [])}'
                        style="background-image: url('${fallbackThumb}');">
                    <img class="episode-thumb" 
                         data-src="${episodeThumb}" 
                         data-fallback="${fallbackThumb}" 
                         alt="${titleText}" 
                         loading="lazy">
                    ${episode.duration ? `<span class="duration">${episode.duration}</span>` : ''}
                </div>
                <p class="episode-title">${titleText}</p>
            </div>
        `;
    }).join('');
}

function appendAutoplay(url) {
    if (autoPlay && url && !url.includes('?')) {
        return `${url}?autoplay=1`;
    } else if (autoPlay && url && url.includes('?')) {
        return `${url}&autoplay=1`; // Se já tiver parâmetros, usa &
    }
    return url; // Retorna sem alteração se autoPlay for false
}

function setupThumbnailLoading() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                const src = img.dataset.src;
                const fallback = img.dataset.fallback;

                // Se a imagem já está no cache, usa diretamente
                if (thumbnailCache[src]) {
                    img.src = thumbnailCache[src];
                    img.closest('#episode-button').style.backgroundImage = `url('${thumbnailCache[src]}')`;
                } else {
                    // Carrega a imagem com transição
                    img.style.opacity = '0'; // Começa invisível
                    img.src = src;
                    img.onload = () => {
                        thumbnailCache[src] = src; // Armazena no cache
                        img.closest('#episode-button').style.backgroundImage = `url('${src}')`;
                        img.style.transition = 'opacity 0.3s ease-in'; // Transição suave
                    };
                    img.onerror = () => {
                        img.src = fallback;
                        thumbnailCache[src] = fallback; // Cache do fallback
                        img.closest('#episode-button').style.backgroundImage = `url('${fallback}')`;
                        img.style.transition = 'opacity 0.3s ease-in';
                    };
                }
                observer.unobserve(img);
            }
        });
    }, { rootMargin: '200px' });

    document.querySelectorAll('.episode-thumb').forEach(img => {
        if (!img.src || img.src === '') {
            observer.observe(img); // Só observa se ainda não foi carregado
        } else if (thumbnailCache[img.dataset.src]) {
            img.style.opacity = '0';
            img.src = thumbnailCache[img.dataset.src]; // Usa o cache se já carregado
            img.style.transition = 'opacity 0.3s ease-in';
            img.style.opacity = '1';
        }
    });
}

function addEpisodeButtonListeners() {
    document.querySelectorAll('#episode-button').forEach((button, index) => {
        button.addEventListener('click', function() {
            document.querySelectorAll('#episode-button').forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            currentEpisodeIndex = index;
            const url = this.getAttribute('data-url');

            openVideoOverlay(appendAutoplay(url)); // Aplica autoplay aqui
            renderToggleButtons(this);
            updateButtonVisibility();

            const serieKey = currentSerie.name.replace(/\s+/g, '_');
            const seasonKey = currentSerie.season[currentSeasonIndex].name || `Temporada_${currentSeasonIndex + 1}`;
            const episode = currentSerie.season[currentSeasonIndex].episodes[currentEpisodeIndex];

            const progress = {
                serieName: currentSerie.name,
                seasonName: currentSerie.season[currentSeasonIndex].name,
                episodeTitle: episode.title,
                episodeIndex: currentEpisodeIndex,
                seasonIndex: currentSeasonIndex,
                thumb: episode.thumb || currentSerie.season[currentSeasonIndex].thumb_season,
                url: episode.url,
                movies: currentSerie.season[currentSeasonIndex].movies,
                activeEpisodeIndex: index
            };

            saveContinueProgress(progress);
            renderContinueWatchingSection();
        });
    });
}

function renderContinueWatchingSection() {
    const seriesContainer = document.getElementById('current-series');
    let continueSeriesElement = document.getElementById('continue-series');

    if (!continueSeriesElement) {
        continueSeriesElement = document.createElement('div');
        continueSeriesElement.id = 'continue-series';
        seriesContainer.insertBefore(continueSeriesElement, seriesContainer.firstChild);
    }

    const serieKey = currentSerie.name.replace(/\s+/g, '_');
    const savedProgress = continues[serieKey] || {};

    let episodesHTML = '';
    Object.keys(savedProgress).forEach(seasonKey => {
        const seasonProgress = savedProgress[seasonKey];
        let episodeText = seasonProgress.movies 
            ? `Filme: ${seasonProgress.episodeTitle}`
            : `T${seasonProgress.seasonIndex + 1} - ${seasonProgress.episodeTitle}`;

        episodesHTML += `
            <div id="continue-episode-button" 
                 style="background-image: url('${seasonProgress.thumb}');" 
                 data-season-index="${seasonProgress.seasonIndex}" 
                 data-episode-index="${seasonProgress.episodeIndex}" 
                 onclick="openVideoOverlay('${appendAutoplay(seasonProgress.url)}', ${seasonProgress.seasonIndex}, ${seasonProgress.episodeIndex})">
                <p>${episodeText}</p>
                <div class="remove-button" data-season-key="${seasonKey}">✕</div>
            </div>
        `;
    });

    if (!episodesHTML) {
        continueSeriesElement.remove();
        return;
    }

    continueSeriesElement.innerHTML = `
        <div id="continue-series-header">
            <p id="available-text">Continuar assistindo</p>
        </div>
        <div id="continue-series-episodes">
            ${episodesHTML}
        </div>
    `;

    // Adiciona a animação aos botões de "Continuar Assistindo" após renderizar
    document.querySelectorAll('#continue-series-episodes #continue-episode-button').forEach((button, index) => {
        button.style.opacity = '0'; // Começa invisível
        setTimeout(() => {
            button.classList.add('fade-in-up');
        }, index * 100); // Atraso de 100ms por botão
    });

    // Adiciona eventos de clique aos botões de remoção
    document.querySelectorAll('#continue-series .remove-button').forEach(button => {
        const newButton = button.cloneNode(true);
        button.parentNode.replaceChild(newButton, button);
        newButton.addEventListener('click', function(event) {
            event.stopPropagation();
            const seasonKey = this.getAttribute('data-season-key');
            removeContinueSeriesSeason(seasonKey);
        });
    });
}

function openVideoOverlay(videoUrl, seasonIndex = currentSeasonIndex, episodeIndex = currentEpisodeIndex) {
    const videoOverlay = document.getElementById('video-overlay');
    const videoIframe = document.getElementById('video-iframe');
    const videoOverlayDropdown = document.getElementById('video-overlay-dropdown');

    const serieKey = currentSerie.name.replace(/\s+/g, '_');
    const seasonKey = `continue_${serieKey}_season_${seasonIndex}`;
    const savedProgress = JSON.parse(localStorage.getItem(seasonKey));
    let initialEpisodeIndex = episodeIndex;

    if (savedProgress && savedProgress.episodeIndex !== undefined) {
        initialEpisodeIndex = savedProgress.episodeIndex;
    }

    const initialSeason = currentSerie.season[seasonIndex];
    const initialItem = initialSeason.episodes[initialEpisodeIndex];
    videoIframe.src = appendAutoplay(initialItem.url); // Usa a função auxiliar
    videoOverlay.classList.remove('hidden');
    videoOverlay.classList.add('show');

    let overlaySeasonDropdown = document.getElementById('overlay-season-dropdown');
    let overlayEpisodesDropdown = document.getElementById('overlay-episodes-dropdown');

    if (!overlaySeasonDropdown || !overlayEpisodesDropdown) {
        overlaySeasonDropdown = document.createElement('select');
        overlaySeasonDropdown.id = 'overlay-season-dropdown';
        overlayEpisodesDropdown = document.createElement('select');
        overlayEpisodesDropdown.id = 'overlay-episodes-dropdown';

        if (currentSerie && currentSerie.season.length > 1) {
            currentSerie.season.forEach((season, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = season.name ? season.name : `Temporada ${index + 1}`;
                overlaySeasonDropdown.appendChild(option);
            });

            overlaySeasonDropdown.value = seasonIndex;
            videoOverlayDropdown.appendChild(overlaySeasonDropdown);

            updateEpisodesDropdown(seasonIndex, overlayEpisodesDropdown);
            overlayEpisodesDropdown.value = initialEpisodeIndex;
            videoOverlayDropdown.appendChild(overlayEpisodesDropdown);

            overlaySeasonDropdown.addEventListener('change', function() {
                const newSeasonIndex = parseInt(this.value, 10);
                const serieKey = currentSerie.name.replace(/\s+/g, '_');
                const seasonKey = currentSerie.season[newSeasonIndex].name || `Temporada_${newSeasonIndex + 1}`;
                const newSavedProgress = continues[serieKey] && continues[serieKey][seasonKey];
                
                if (newSavedProgress && newSavedProgress.episodeIndex !== undefined) {
                    currentEpisodeIndex = newSavedProgress.episodeIndex;
                } else {
                    currentEpisodeIndex = 0;
                }

                updateEpisodesDropdown(newSeasonIndex, overlayEpisodesDropdown);
                overlayEpisodesDropdown.value = currentEpisodeIndex;
                
                const selectedSeason = currentSerie.season[newSeasonIndex];
                const selectedItem = selectedSeason.episodes[currentEpisodeIndex];
                videoIframe.src = appendAutoplay(selectedItem.url); // Aplica autoplay aqui

                if (newSeasonIndex === currentSeasonIndex) {
                    document.querySelectorAll('#episode-button').forEach(btn => btn.classList.remove('active'));
                    const currentEpisodeButton = document.querySelector(`#episode-button[data-url="${selectedItem.url}"]`);
                    if (currentEpisodeButton) currentEpisodeButton.classList.add('active');
                    renderToggleButtons(currentEpisodeButton || document.createElement('div'));
                    updateButtonVisibility();
                }

                const progress = {
                    serieName: currentSerie.name,
                    seasonName: selectedSeason.name,
                    episodeTitle: selectedItem.title,
                    episodeIndex: currentEpisodeIndex,
                    seasonIndex: newSeasonIndex,
                    thumb: selectedItem.thumb || selectedSeason.thumb_season,
                    url: selectedItem.url,
                    movies: selectedSeason.movies,
                    activeEpisodeIndex: currentEpisodeIndex
                };

                saveContinueProgress(progress);
                renderContinueWatchingSection();
            });

            overlayEpisodesDropdown.addEventListener('change', function() {
                currentEpisodeIndex = parseInt(this.value, 10);
                const currentOverlaySeasonIndex = parseInt(overlaySeasonDropdown.value, 10);
                const selectedSeason = currentSerie.season[currentOverlaySeasonIndex];
                const selectedItem = selectedSeason.episodes[currentEpisodeIndex];

                videoIframe.src = appendAutoplay(selectedItem.url); // Aplica autoplay aqui
                overlayEpisodesDropdown.value = currentEpisodeIndex;

                if (currentOverlaySeasonIndex === currentSeasonIndex) {
                    document.querySelectorAll('#episode-button').forEach(btn => btn.classList.remove('active'));
                    const currentEpisodeButton = document.querySelector(`#episode-button[data-url="${selectedItem.url}"]`);
                    if (currentEpisodeButton) currentEpisodeButton.classList.add('active');
                    renderToggleButtons(currentEpisodeButton || document.createElement('div'));
                    updateButtonVisibility();
                }

                const progress = {
                    serieName: currentSerie.name,
                    seasonName: selectedSeason.name,
                    episodeTitle: selectedItem.title,
                    episodeIndex: currentEpisodeIndex,
                    seasonIndex: currentOverlaySeasonIndex,
                    thumb: selectedItem.thumb || selectedSeason.thumb_season,
                    url: selectedItem.url,
                    movies: selectedSeason.movies,
                    activeEpisodeIndex: currentEpisodeIndex
                };

                saveContinueProgress(progress);
                renderContinueWatchingSection();
            });
        }
    } else {
        overlaySeasonDropdown.value = seasonIndex;
        updateEpisodesDropdown(seasonIndex, overlayEpisodesDropdown);
    }
}

function updateEpisodesDropdown(seasonIndex, episodesDropdown) {
    episodesDropdown.innerHTML = '';

    const selectedSeason = currentSerie.season[seasonIndex];
    selectedSeason.episodes.forEach((item, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = item.title || `Episódio ${index + 1}`;
        episodesDropdown.appendChild(option);
    });

    // Define o valor do dropdown com base no currentEpisodeIndex
    episodesDropdown.value = currentEpisodeIndex;
}

function renderToggleButtons(button) {
    const toggleButtonsContainer = document.getElementById('toggle-buttons-container');
    toggleButtonsContainer.innerHTML = '';

    let mainUrl = button.getAttribute('data-url');
    let alternatives = JSON.parse(button.getAttribute('data-alternative'));

    if ((!mainUrl || mainUrl.trim() === "") && alternatives.length > 0) {
        mainUrl = alternatives[0]; // Pega o primeiro elemento sem modificar o array
    }

    const updateActiveButton = (activeUrl) => {
        document.querySelectorAll('.toggle-button').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-url') === activeUrl);
        });
        const videoIframe = document.getElementById('video-iframe');
        videoIframe.src = appendAutoplay(activeUrl); // Aplica autoplay aqui
    };

    let mainButton = null;
    if (mainUrl) {
        mainButton = document.createElement('button');
        mainButton.innerText = 'PRINCIPAL';
        mainButton.classList.add('toggle-button', 'active');
        mainButton.setAttribute('data-url', mainUrl);
        mainButton.addEventListener('click', () => {
            updateActiveButton(mainUrl);
        });
        toggleButtonsContainer.appendChild(mainButton);
    }

    alternatives.forEach((altUrl, index) => {
        const altButton = document.createElement('button');
        altButton.innerText = `OPÇÃO ${index + 2}`;
        altButton.setAttribute('data-url', altUrl);
        altButton.classList.add('toggle-button');
        altButton.addEventListener('click', () => {
            updateActiveButton(altUrl);
        });
        toggleButtonsContainer.appendChild(altButton);
    });

    if (mainButton && alternatives.length === 0) {
        mainButton.style.display = 'none';
    }

    const initialUrl = mainUrl || (alternatives.length > 0 ? alternatives[0] : '');
    if (initialUrl) {
        updateActiveButton(initialUrl);
    }
}

function navigateDirection(direction) {
    const currentSeason = currentSerie.season[currentSeasonIndex];
    const totalItems = currentSeason.episodes.length;

    const serieKey = currentSerie.name.replace(/\s+/g, '_');
    const seasonKey = currentSeason.name || `Temporada_${currentSeasonIndex + 1}`;
    const seasonProgress = continues[serieKey] && continues[serieKey][seasonKey];
    if (seasonProgress && seasonProgress.episodeIndex !== undefined) {
        currentEpisodeIndex = seasonProgress.episodeIndex;
    }

    if (direction === 'prev' && currentEpisodeIndex > 0) {
        currentEpisodeIndex--;
    } else if (direction === 'next' && currentEpisodeIndex < totalItems - 1) {
        currentEpisodeIndex++;
    } else {
        return;
    }

    const episodesDropdown = document.getElementById('overlay-episodes-dropdown');
    if (episodesDropdown) {
        episodesDropdown.value = currentEpisodeIndex;
    }

    const episode = currentSeason.episodes[currentEpisodeIndex];
    openVideoOverlay(appendAutoplay(episode.url)); // Aplica autoplay aqui

    const serieName = currentSerie.name;
    const seasonName = currentSeason.name;
    const episodeTitle = episode.title;

    const progress = {
        serieName,
        seasonName,
        episodeTitle,
        episodeIndex: currentEpisodeIndex,
        seasonIndex: currentSeasonIndex,
        thumb: episode.thumb || currentSeason.thumb_season,
        url: episode.url,
        movies: currentSeason.movies,
        activeEpisodeIndex: currentEpisodeIndex
    };

    saveContinueProgress(progress);
    renderContinueWatchingSection();

    document.querySelectorAll('#episode-button').forEach(btn => btn.classList.remove('active'));
    const currentEpisodeButton = document.querySelector(`#episode-button[data-url="${episode.url}"]`);
    if (currentEpisodeButton) currentEpisodeButton.classList.add('active');

    renderToggleButtons(currentEpisodeButton || document.querySelector(`#episode-button[data-url="${episode.url}"]`));
    updateButtonVisibility();
}

function updateButtonVisibility() {
    const prevButton = document.getElementById('prev-video-button');
    const nextButton = document.getElementById('next-video-button');
    const currentSeason = currentSerie.season[currentSeasonIndex];
    const totalItems = currentSeason.episodes.length;

    prevButton.style.display = currentEpisodeIndex === 0 ? 'none' : 'block';
    nextButton.style.display = currentEpisodeIndex === totalItems - 1 ? 'none' : 'block';
}

function saveContinueProgress(progress) {
    let currentContinues = JSON.parse(localStorage.getItem('continues')) || {};
    const serieKey = progress.serieName.replace(/\s+/g, '_');
    const seasonKey = progress.seasonName || `Temporada_${progress.seasonIndex + 1}`;

    if (!currentContinues[serieKey]) {
        currentContinues[serieKey] = {};
    }

    currentContinues[serieKey][seasonKey] = {
        serieName: progress.serieName,
        seasonName: progress.seasonName,
        episodeTitle: progress.episodeTitle,
        episodeIndex: progress.episodeIndex,
        seasonIndex: progress.seasonIndex,
        thumb: progress.thumb,
        url: progress.url,
        movies: progress.movies,
        activeEpisodeIndex: progress.activeEpisodeIndex
    };

    continues = currentContinues; // Atualiza a variável global
    localStorage.setItem('continues', JSON.stringify(continues));
}

function removeContinueSeriesSeason(seasonKey) {
    if (currentSerie) {
        const serieKey = currentSerie.name.replace(/\s+/g, '_');
        if (continues[serieKey] && continues[serieKey][seasonKey]) {
            delete continues[serieKey][seasonKey];
            if (Object.keys(continues[serieKey]).length === 0) {
                delete continues[serieKey];
            }
            localStorage.setItem('continues', JSON.stringify(continues));
            continues = JSON.parse(localStorage.getItem('continues')) || {};
            renderContinueWatchingSection();
        } else {
            console.warn(`Chave ${seasonKey} não encontrada em continues[${serieKey}]`);
        }
    } else {
        console.warn('currentSerie não está definido');
    }
}

//INICIO
let searchInput;

function filterSeries() {
    const query = searchInput.value.trim();
    const favoritesButton = document.querySelector('#keys button:nth-child(2)');
    const isFavoritesChecked = favoritesButton && favoritesButton.innerText === '★';
    const groupHome = document.getElementById('group-home');
    const groupFavorites = document.getElementById('group-favorites');
    const groupContinues = document.getElementById('group-continues');
    const checkedButton = document.querySelector('#keys button.checked');

    if (query.length > 0) {
        const filteredGroups = seriesData.map(group => {
            const filteredGroup = group.group.filter(serie =>
                serie.name.toUpperCase().includes(query.toUpperCase())
            );
            return { ...group, group: filteredGroup };
        }).filter(group => group.group.length > 0);
        groupHome.style.display = 'block';
        groupFavorites.style.display = 'none';
        groupContinues.style.display = 'none';
        currentFilter = { type: 'search', value: query };
        renderSeriesButtons(filteredGroups);
    } else if (isFavoritesChecked) {
        groupHome.style.display = 'none';
        groupFavorites.style.display = 'block';
        groupContinues.style.display = 'none';
        currentFilter = { type: 'favorites' };
    } else if (checkedButton) {
        const letter = checkedButton.innerText;
        if (letter === 'TODAS') {
            groupHome.style.display = 'block';
            groupFavorites.style.display = 'block';
            groupContinues.style.display = 'block';
            currentFilter = null;
            renderSeriesButtons();
        } else if (letter !== '☆' && letter !== '★') {
            const filteredGroups = seriesData.map(group => {
                const filteredGroup = group.group.filter(serie =>
                    serie.name.toUpperCase().startsWith(letter)
                );
                return { ...group, group: filteredGroup };
            }).filter(group => group.group.length > 0);
            groupHome.style.display = 'block';
            groupFavorites.style.display = 'none';
            groupContinues.style.display = 'none';
            currentFilter = { type: 'letter', value: letter };
            renderSeriesButtons(filteredGroups);
        }
    } else {
        groupHome.style.display = 'block';
        groupFavorites.style.display = 'block';
        groupContinues.style.display = 'block';
        currentFilter = null;
        renderSeriesButtons();
    }
}

function renderCarousel() {
    const carouselIndicators = document.getElementById('carousel-indicators');
    const carouselInner = document.getElementById('carousel-inner');
    const $carousel = jQuery('#myCarousel');
    const $bar = jQuery('.transition-timer-carousel-progress-bar');

    const seriesWithThumbPage = seriesData
        .flatMap(group => group.group)
        .filter(serie => serie.thumb_page && serie.thumb_page.trim() !== "");

    if (seriesWithThumbPage.length === 0) {
        $carousel.hide();
        return;
    } else {
        $carousel.show();
    }

    carouselIndicators.innerHTML = '';
    carouselInner.innerHTML = '';

    seriesWithThumbPage.forEach((serie, index) => {
        const indicator = document.createElement('li');
        indicator.setAttribute('data-target', '#myCarousel');
        indicator.setAttribute('data-slide-to', index);
        if (index === 0) indicator.classList.add('active');
        carouselIndicators.appendChild(indicator);

        const item = document.createElement('div');
        item.classList.add('item');
        if (index === 0) item.classList.add('active');
        item.innerHTML = `
            <div class="container">
                <div class="carousel-caption" style="background-image: url('${serie.thumb_page}'); background-size: cover; background-position: center;">
                    <h3>${serie.name}</h3>
                </div>
            </div>
        `;
        carouselInner.appendChild(item);
    });

    const slideDuration = 4000; // Tempo total de cada slide em ms
    let startTime; // Timestamp de início do slide
    let pausedPercent = 0; // Percentual quando pausado
    let barInterval;

    $carousel.carousel({
        interval: false, // Desativa o avanço automático do Bootstrap
        pause: true
    });

    // Função para animar a barra de progresso baseada no tempo real
    function progressBarCarousel() {
        const elapsedTime = Date.now() - startTime; // Tempo decorrido desde o início
        let percent = (elapsedTime / slideDuration) * 100; // Percentual baseado no tempo real

        // Limita o percentual a 100%
        if (percent >= 100) {
            percent = 100;
            $bar.css({ width: '100%' });
            $carousel.carousel('next');
            return; // Evita continuar o intervalo após o avanço
        }

        $bar.css({ width: percent + '%' });
        pausedPercent = percent; // Atualiza o valor pausado
    }

    // Inicia ou reinicia a animação
    function startProgressBar() {
        clearInterval(barInterval);
        if (pausedPercent === 0) {
            // Início completo (novo slide)
            startTime = Date.now();
            $bar.css({ width: '0%' });
        } else {
            // Retoma de onde parou
            const elapsedTime = (pausedPercent / 100) * slideDuration; // Tempo já decorrido
            startTime = Date.now() - elapsedTime; // Ajusta o startTime para continuar
            $bar.css({ width: pausedPercent + '%' }); // Mantém o progresso atual
        }
        barInterval = setInterval(progressBarCarousel, 30); // Atualiza a cada 30ms
    }

    startProgressBar();

    // Reset ao clicar nos indicadores ou controles
    jQuery('.carousel-indicators li, .carousel-control').click(function () {
        pausedPercent = 0; // Reseta para o início
        clearInterval(barInterval);
        startProgressBar();
    });

    // Reset ao iniciar a transição de slide
    $carousel.on('slide.bs.carousel', function () {
        pausedPercent = 0; // Reseta para o início
        clearInterval(barInterval);
        $bar.css({ width: '0%' });
    });

    // Reinicia após a transição
    $carousel.on('slid.bs.carousel', function () {
        startProgressBar();
    });

    // Pausa e retomada ao passar o mouse (se não for mobile)
    if (!(/Mobi/.test(navigator.userAgent))) {
        $carousel.hover(
            function () {
                clearInterval(barInterval); // Pausa a animação
                // `pausedPercent` já foi atualizado em progressBarCarousel
            },
            function () {
                startProgressBar(); // Retoma de onde parou
            }
        );
    }
}

function renderSeriesButtons(filteredGroups) {
    const groupHome = document.getElementById('group-home');
    groupHome.innerHTML = '';
    
    favorites = JSON.parse(localStorage.getItem('favorites')) || [];

    const groups = filteredGroups || seriesData;

    groups.forEach((group, groupIndex) => {
        const sortedGroup = [...group.group].sort((a, b) => {
            const aHasBadge = a.badge && a.badge !== "";
            const bHasBadge = b.badge && b.badge !== "";
            if (aHasBadge !== bHasBadge) {
                return bHasBadge - aHasBadge;
            }
            if (aHasBadge && bHasBadge) {
                const badgeComparison = a.badge.localeCompare(b.badge);
                if (badgeComparison !== 0) {
                    return badgeComparison;
                }
            }
            return a.name.localeCompare(b.name);
        });

        const groupSeriesHTML = `
        <div id="group-series" class="group-series-enter" style="animation-delay: ${groupIndex * 0.2}s;">
            <div id="group-series-header">
                <h2>${group.group_name}</h2>
            </div>
            <div id="group-series-cards">
                ${sortedGroup.map(serie => {
                    const isFavorite = favorites.some(fav => fav.name === serie.name);
                    const disabledClass = serie.enabled ? '' : 'disabled';
                    if (!selectedThumbs[serie.name]) {
                        const randomThumbIndex = Math.floor(Math.random() * serie.thumb_buttons.length);
                        selectedThumbs[serie.name] = serie.thumb_buttons[randomThumbIndex];
                    }
                    const selectedThumb = selectedThumbs[serie.name];
                    const backgroundStyle = `--bg-image: url(${selectedThumb});`;
                    return `
                    <div id="group-series-button" class="${disabledClass}" style="${backgroundStyle}" data-selected-thumb="${selectedThumb}">
                        ${serie.badge ? `<span class="badge">${serie.badge}</span>` : ''}
                        <div class="info">
                            <h1>${serie.name}</h1>
                            ${serie.enabled ? (
                                serie.season.length > 0 ? `
                                    ${serie.canais ? `
                                        <p>Canais disponíveis: ${serie.season.reduce((total, season) => total + season.episodes.length, 0)}</p>
                                    ` : `
                                        ${serie.season.some(season => season.movies) ? `
                                            <p>${serie.info}: ${serie.season.filter(season => !season.movies).length}</p>
                                            <p>Filmes: ${serie.season.filter(season => season.movies).reduce((total, season) => total + season.episodes.length, 0)}</p>
                                        ` : `
                                            <p>${serie.info}: ${serie.season.length}</p>
                                        `}
                                        <p>Episódios disponíveis: ${serie.season.filter(season => !season.movies).reduce((total, season) => total + season.episodes.length, 0)}</p>
                                    `}
                                ` : `
                                    <p>Nenhum conteúdo disponível</p>
                                `
                            ) : ``}
                            ${serie.enabled ? `<button class="watch-button">ASSISTIR</button>` : `<button class="watch-button">${serie.title || 'EM BREVE'}</button>`}
                        </div>
                        <button class="favorite-button ${isFavorite ? 'active' : ''}" data-serie='${JSON.stringify(serie)}'>
                            ${isFavorite ? '★' : '☆'}
                            <span class="tooltip-text black tooltip-top">${isFavorite ? 'Remover dos favoritos' : 'Adicionar aos favoritos'}</span>
                        </button>
                    </div>
                    `;
                }).join('')}
            </div>
        </div>`;
        groupHome.innerHTML += groupSeriesHTML;
    });

    // Adiciona a animação aos botões dentro de group-series-cards
    document.querySelectorAll('#group-series-button').forEach((button, index) => {
        button.style.opacity = '0';
        setTimeout(() => {
            button.classList.add('fade-in-up');
        }, index * animationSpeedButtons);
    });

    // Remove eventos de clique anteriores para evitar duplicatas
    document.querySelectorAll('.favorite-button').forEach(button => {
        const newButton = button.cloneNode(true);
        button.parentNode.replaceChild(newButton, button);
    });

    // Adiciona os novos eventos de clique
    document.querySelectorAll('.favorite-button').forEach(button => {
        button.addEventListener('click', function(event) {
            event.stopPropagation();
            const serie = JSON.parse(this.getAttribute('data-serie'));
            const isFavorite = this.classList.contains('active');
            if (isFavorite) {
                removeFavorite(serie);
            } else {
                saveFavorite(serie);
            }
            this.classList.toggle('active');
            this.innerHTML = this.classList.contains('active') 
                ? '★ <span class="tooltip-text black tooltip-top">Remover dos favoritos</span>' 
                : '☆ <span class="tooltip-text black tooltip-top">Adicionar aos favoritos</span>';
            updateFavorites();
            filterSeries();
        });
    });

    document.querySelectorAll('#group-series-button').forEach(button => {
        button.addEventListener('click', function() {
            const serieName = this.querySelector('h1').innerText;
            const serie = seriesData.flatMap(group => group.group).find(serie => serie.name === serieName);
            if (!serie.enabled) return;
            window.history.pushState({ page: 'series', serieName: serieName }, serieName, `#${serieName.replace(/\s+/g, '-')}`);
            document.getElementById('home').classList.remove('show');
            document.getElementById('home').classList.add('hidden');
            document.getElementById('series').classList.add('show');
            document.getElementById('series').classList.remove('hidden');
            document.getElementById('series-title').classList.remove('show');
            document.getElementById('series-title').classList.add('hidden');
            document.getElementById('logo').classList.remove('show');
            document.getElementById('logo').classList.add('hidden');
            document.getElementById('series-name').classList.remove('hidden');
            document.getElementById('series-name').classList.add('show');
            document.getElementById('back-button').classList.remove('hidden');
            document.getElementById('back-button').classList.add('show');
            renderCurrentSeries(serie);
        });
    });
}

function updateFavorites() {
    const groupFavorites = document.getElementById('group-favorites');
    groupFavorites.innerHTML = '';

    favorites = JSON.parse(localStorage.getItem('favorites')) || [];

    if (favorites.length > 0) {
        const sortedFavorites = [...favorites].sort((a, b) => {
            const aHasBadge = a.badge && a.badge !== "";
            const bHasBadge = b.badge && b.badge !== "";
            if (aHasBadge !== bHasBadge) {
                return bHasBadge - aHasBadge;
            }
            if (aHasBadge && bHasBadge) {
                const badgeComparison = a.badge.localeCompare(b.badge);
                if (badgeComparison !== 0) {
                    return badgeComparison;
                }
            }
            return a.name.localeCompare(b.name);
        });

        const favoritesHTML = `
        <div id="group-series" class="group-series-enter">
            <div id="group-series-header">
                <h3>FAVORITOS ★☆</h3>
            </div>
            <div id="group-series-cards">
                ${sortedFavorites.map(serie => {
                    const disabledClass = serie.enabled ? '' : 'disabled';
                    const selectedThumb = selectedThumbs[serie.name] || serie.thumb_buttons[0];
                    const backgroundStyle = `--bg-image: url(${selectedThumb});`;
                    return `
                    <div id="group-series-button" class="${disabledClass}" style="${backgroundStyle}" data-selected-thumb="${selectedThumb}">
                        ${serie.badge ? `<span class="badge">${serie.badge}</span>` : ''}
                        <div class="info">
                            <h1>${serie.name}</h1>
                            ${serie.enabled ? (
                                serie.season.length > 0 ? `
                                    ${serie.canais ? `
                                        <p>Canais disponíveis: ${serie.season.reduce((total, season) => total + season.episodes.length, 0)}</p>
                                    ` : `
                                        ${serie.season.some(season => season.movies) ? `
                                            <p>${serie.info}: ${serie.season.filter(season => !season.movies).length}</p>
                                            <p>Filmes: ${serie.season.filter(season => season.movies).reduce((total, season) => total + season.episodes.length, 0)}</p>
                                        ` : `
                                            <p>${serie.info}: ${serie.season.length}</p>
                                        `}
                                        <p>Episódios disponíveis: ${serie.season.filter(season => !season.movies).reduce((total, season) => total + season.episodes.length, 0)}</p>
                                    `}
                                ` : `
                                    <p>Nenhum conteúdo disponível</p>
                                `
                            ) : ``}
                            ${serie.enabled ? `<button class="watch-button">ASSISTIR</button>` : `<button class="watch-button">${serie.title || 'EM BREVE'}</button>`}
                        </div>
                        <button class="favorite-button active" data-serie='${JSON.stringify(serie)}'>
                            ★
                            <span class="tooltip-text black tooltip-top">Remover dos favoritos</span>
                        </button>
                    </div>
                    `;
                }).join('')}
            </div>
        </div>`;
        groupFavorites.innerHTML = favoritesHTML;

        // Adiciona a animação aos botões dentro de group-series-cards
        document.querySelectorAll('#group-favorites #group-series-button').forEach((button, index) => {
            button.style.opacity = '0';
            setTimeout(() => {
                button.classList.add('fade-in-up');
            }, index * 100);
        });

        // Remove eventos de clique anteriores para evitar duplicatas
        document.querySelectorAll('#group-favorites .favorite-button').forEach(button => {
            const newButton = button.cloneNode(true);
            button.parentNode.replaceChild(newButton, button);
        });

        // Adiciona os novos eventos de clique para os botões de favorito
        document.querySelectorAll('#group-favorites .favorite-button').forEach(button => {
            button.addEventListener('click', function(event) {
                event.stopPropagation();
                const serie = JSON.parse(this.getAttribute('data-serie'));
                removeFavorite(serie);
        
                // Atualiza manualmente o botão correspondente no group-home
                const groupHomeButtons = document.querySelectorAll('#group-home .favorite-button');
                groupHomeButtons.forEach(btn => {
                    const btnSerie = JSON.parse(btn.getAttribute('data-serie'));
                    if (btnSerie.name === serie.name) {
                        btn.classList.remove('active');
                        btn.innerHTML = '☆ <span class="tooltip-text black tooltip-top">Adicionar aos favoritos</span>';
                    }
                });
        
                updateFavorites();
                filterSeries(); 
            });
        });

        // Adiciona os eventos de clique para os botões de série
        document.querySelectorAll('#group-favorites #group-series-button').forEach(button => {
            button.addEventListener('click', function() {
                const serieName = this.querySelector('h1').innerText;
                const serie = seriesData.flatMap(group => group.group).find(serie => serie.name === serieName);
                
                if (!serie.enabled) return;

                window.history.pushState({ page: 'series', serieName: serieName }, serieName, `#${serieName.replace(/\s+/g, '-')}`);

                document.getElementById('home').classList.remove('show');
                document.getElementById('home').classList.add('hidden');
                document.getElementById('series').classList.add('show');
                document.getElementById('series').classList.remove('hidden');
                document.getElementById('series-title').classList.remove('show');
                document.getElementById('series-title').classList.add('hidden');
                document.getElementById('logo').classList.remove('show');
                document.getElementById('logo').classList.add('hidden');
                document.getElementById('series-name').classList.remove('hidden');
                document.getElementById('series-name').classList.add('show');
                document.getElementById('back-button').classList.remove('hidden');
                document.getElementById('back-button').classList.add('show');

                renderCurrentSeries(serie);
            });
        });
    } else {
        groupFavorites.innerHTML = '';
    }
}

function saveFavorite(serie) {
    if (!favorites.some(fav => fav.name === serie.name)) {
        favorites.push(serie); // Salva a série sem adicionar selectedThumb
        localStorage.setItem('favorites', JSON.stringify(favorites));
    }
}

function removeFavorite(serie) {
    favorites = favorites.filter(fav => fav.name !== serie.name);
    localStorage.setItem('favorites', JSON.stringify(favorites));
    favorites = JSON.parse(localStorage.getItem('favorites')) || [];
}

document.addEventListener('DOMContentLoaded', function() {
    if (window.location.hash) {
        history.replaceState(null, document.title, window.location.pathname);
    }

    searchInput = document.querySelector('#search .input');

    renderCarousel();
    renderSeriesButtons();
    updateFavorites();

    document.getElementById('prev-video-button').addEventListener('click', function() {
        navigateDirection('prev');
    });
    
    document.getElementById('next-video-button').addEventListener('click', function() {
        navigateDirection('next');
    });

    document.getElementById('close-overlay-button').addEventListener('click', function() {
        const videoOverlay = document.getElementById('video-overlay');
        const videoIframe = document.getElementById('video-iframe');
        videoOverlay.classList.remove('show');
        videoOverlay.classList.add('hidden');
        videoIframe.src = '';
        const overlaySeasonDropdown = document.getElementById('overlay-season-dropdown');
        const overlayEpisodesDropdown = document.getElementById('overlay-episodes-dropdown');
        if (overlaySeasonDropdown) overlaySeasonDropdown.remove();
        if (overlayEpisodesDropdown) overlayEpisodesDropdown.remove();
    });

    document.querySelectorAll('#back-button').forEach(button => {
        button.addEventListener('click', function() {
            window.history.pushState({ page: 'home' }, '', window.location.pathname);
            window.dispatchEvent(new PopStateEvent('popstate', { state: { page: 'home' } }));
        });
    });

    searchInput.addEventListener('input', filterSeries);

    const buttons = document.querySelectorAll('#keys button');
    buttons.forEach((button, index) => {
        const delay = animationSpeedSearchsKeys / 100;
        button.style.animationDelay = `${index * delay}s`;
        button.classList.add('slide-in-right');
        button.style.animationFillMode = 'backwards';
    });
    
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            if (this.classList.contains('checked')) {
                this.classList.add('shake', 'shake-left');
                setTimeout(() => {
                    this.classList.remove('shake-left');
                    this.classList.add('shake-right');
                }, 100);
                setTimeout(() => {
                    this.classList.remove('shake-right', 'shake');
                }, 200);
                return;
            }

            const isFavoritesButton = this.innerText === '☆' || this.innerText === '★';
            const favoritesButton = document.querySelector('#keys button:nth-child(2)');
    
            buttons.forEach(btn => btn.classList.remove('checked'));
            this.classList.add('checked');
    
            if (isFavoritesButton) {
                this.innerText = this.innerText === '☆' ? '★' : '☆';
            } else {
                if (favoritesButton && favoritesButton.innerText === '★') {
                    favoritesButton.innerText = '☆';
                }
            }
    
            filterSeries();
        });
    });

    window.addEventListener('popstate', function(event) {
        if (!event.state || event.state.page === 'home') {
            document.getElementById('home').classList.remove('hidden');
            document.getElementById('home').classList.add('show');
            document.getElementById('series').classList.add('hidden');
            document.getElementById('series').classList.remove('show');
            document.getElementById('series-title').classList.remove('hidden');
            document.getElementById('series-title').classList.add('show');
            document.getElementById('logo').classList.remove('hidden');
            document.getElementById('logo').classList.add('show');
            document.getElementById('series-name').classList.remove('show');
            document.getElementById('series-name').classList.add('hidden');
            document.getElementById('back-button').classList.remove('show');
            document.getElementById('back-button').classList.add('hidden');

            filterSeries();
        } else if (event.state.page === 'series') {
            const serieName = event.state.serieName;
            const serie = seriesData.flatMap(group => group.group).find(serie => serie.name === serieName);
            if (serie) {
                document.getElementById('home').classList.remove('show');
                document.getElementById('home').classList.add('hidden');
                document.getElementById('series').classList.add('show');
                document.getElementById('series').classList.remove('hidden');
                document.getElementById('series-title').classList.remove('show');
                document.getElementById('series-title').classList.add('hidden');
                document.getElementById('logo').classList.remove('show');
                document.getElementById('logo').classList.add('hidden');
                document.getElementById('series-name').classList.remove('hidden');
                document.getElementById('series-name').classList.add('show');
                document.getElementById('back-button').classList.remove('hidden');
                document.getElementById('back-button').classList.add('show');
                renderCurrentSeries(serie);
            }
        }
    });
    
    const defaultButton = document.querySelector('#keys button:first-child');
    defaultButton.classList.add('checked');
    defaultButton.click();
});

window.addEventListener('keydown', (event) => {
    const videoOverlay = document.querySelector('#video-overlay');
    const seriesContainer = document.querySelector('#series');

    switch (event.key) {
        case 'Escape':
            if (videoOverlay.classList.contains('show')) {
                document.querySelector('#close-overlay-button').click();
            }
            else { //if (seriesContainer.classList.contains('hidden')) {
                document.querySelector('#back-button').click();
                document.querySelector('#back-button').click();
                document.querySelector('#back-button').click();
            }
        break;
        case 'Backspace':
            if (!videoOverlay.classList.contains('show')) {
                document.querySelector('#back-button').click();
                document.querySelector('#back-button').click();
                document.querySelector('#back-button').click();
            }

        break;
        case 'ArrowLeft':
            navigateDirection('prev');
        break;
        case 'ArrowRight':
            navigateDirection('next');
        break;  
    }
});
    </script>

</body>
</html>